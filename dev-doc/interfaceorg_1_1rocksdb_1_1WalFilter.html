<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>autotier: org.rocksdb.WalFilter Interface Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">autotier
   </div>
   <div id="projectbrief">Automatic Tiering Fuse Filesystem</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>org</b></li><li class="navelem"><b>rocksdb</b></li><li class="navelem"><a class="el" href="interfaceorg_1_1rocksdb_1_1WalFilter.html">WalFilter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="interfaceorg_1_1rocksdb_1_1WalFilter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">org.rocksdb.WalFilter Interface Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for org.rocksdb.WalFilter:</div>
<div class="dyncontent">
<div class="center"><img src="interfaceorg_1_1rocksdb_1_1WalFilter__inherit__graph.png" border="0" usemap="#org_8rocksdb_8WalFilter_inherit__map" alt="Inheritance graph"/></div>
<map name="org_8rocksdb_8WalFilter_inherit__map" id="org_8rocksdb_8WalFilter_inherit__map">
<area shape="rect" title=" " alt="" coords="33,5,191,32"/>
<area shape="rect" href="classorg_1_1rocksdb_1_1AbstractWalFilter.html" title=" " alt="" coords="5,80,219,107"/>
<area shape="rect" href="classorg_1_1rocksdb_1_1WalFilterTest_1_1TestableWalFilter.html" title=" " alt="" coords="17,155,207,196"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1rocksdb_1_1WalFilter_1_1LogRecordFoundResult.html">LogRecordFoundResult</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4cc6f4d9fb02ea05caafb8fe511f8596"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceorg_1_1rocksdb_1_1WalFilter.html#a4cc6f4d9fb02ea05caafb8fe511f8596">columnFamilyLogNumberMap</a> (final Map&lt; Integer, Long &gt; cfLognumber, final Map&lt; String, Integer &gt; cfNameId)</td></tr>
<tr class="separator:a4cc6f4d9fb02ea05caafb8fe511f8596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8a354873d5eec97270acf38c9423475"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classorg_1_1rocksdb_1_1WalFilter_1_1LogRecordFoundResult.html">LogRecordFoundResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceorg_1_1rocksdb_1_1WalFilter.html#ad8a354873d5eec97270acf38c9423475">logRecordFound</a> (final long logNumber, final String logFileName, final <a class="el" href="classorg_1_1rocksdb_1_1WriteBatch.html">WriteBatch</a> batch, final <a class="el" href="classorg_1_1rocksdb_1_1WriteBatch.html">WriteBatch</a> newBatch)</td></tr>
<tr class="separator:ad8a354873d5eec97270acf38c9423475"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64557817b75165f1a62d808ca5abeeff"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceorg_1_1rocksdb_1_1WalFilter.html#a64557817b75165f1a62d808ca5abeeff">name</a> ()</td></tr>
<tr class="separator:a64557817b75165f1a62d808ca5abeeff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>WALFilter allows an application to inspect write-ahead-log (WAL) records or modify their processing on recovery. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a4cc6f4d9fb02ea05caafb8fe511f8596"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cc6f4d9fb02ea05caafb8fe511f8596">&#9670;&nbsp;</a></span>columnFamilyLogNumberMap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.rocksdb.WalFilter.columnFamilyLogNumberMap </td>
          <td>(</td>
          <td class="paramtype">final Map&lt; Integer, Long &gt;&#160;</td>
          <td class="paramname"><em>cfLognumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final Map&lt; String, Integer &gt;&#160;</td>
          <td class="paramname"><em>cfNameId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Provide ColumnFamily-&gt;LogNumber map to filter so that filter can determine whether a log number applies to a given column family (i.e. that log hasn't been flushed to SST already for the column family).</p>
<p>We also pass in name&gt;id map as only name is known during recovery (as handles are opened post-recovery). while write batch callbacks happen in terms of column family id.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cfLognumber</td><td>column_family_id to lognumber map </td></tr>
    <tr><td class="paramname">cfNameId</td><td>column_family_name to column_family_id map </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classorg_1_1rocksdb_1_1WalFilterTest_1_1TestableWalFilter.html#a9237333f87a817b9331b58e29d2bffd1">org.rocksdb.WalFilterTest.TestableWalFilter</a>.</p>

</div>
</div>
<a id="ad8a354873d5eec97270acf38c9423475"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8a354873d5eec97270acf38c9423475">&#9670;&nbsp;</a></span>logRecordFound()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1rocksdb_1_1WalFilter_1_1LogRecordFoundResult.html">LogRecordFoundResult</a> org.rocksdb.WalFilter.logRecordFound </td>
          <td>(</td>
          <td class="paramtype">final long&#160;</td>
          <td class="paramname"><em>logNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final String&#160;</td>
          <td class="paramname"><em>logFileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final <a class="el" href="classorg_1_1rocksdb_1_1WriteBatch.html">WriteBatch</a>&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final <a class="el" href="classorg_1_1rocksdb_1_1WriteBatch.html">WriteBatch</a>&#160;</td>
          <td class="paramname"><em>newBatch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>LogRecord is invoked for each log record encountered for all the logs during replay on logs on recovery. This method can be used to:</p><ul>
<li>inspect the record (using the batch parameter)</li>
<li>ignoring current record (by returning WalProcessingOption::kIgnoreCurrentRecord)</li>
<li>reporting corrupted record (by returning WalProcessingOption::kCorruptedRecord)</li>
<li>stop log replay (by returning kStop replay) - please note that this implies discarding the logs from current record onwards.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">logNumber</td><td>log number of the current log. <a class="el" href="classorg_1_1rocksdb_1_1Filter.html">Filter</a> might use this to determine if the log record is applicable to a certain column family. </td></tr>
    <tr><td class="paramname">logFileName</td><td>log file name - only for informational purposes </td></tr>
    <tr><td class="paramname">batch</td><td>batch encountered in the log during recovery </td></tr>
    <tr><td class="paramname">newBatch</td><td>new batch to populate if filter wants to change the batch (for example to filter some records out, or alter some records). Please note that the new batch MUST NOT contain more records than original, else recovery would be failed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Processing option for the current record. </dd></dl>

<p>Implemented in <a class="el" href="classorg_1_1rocksdb_1_1WalFilterTest_1_1TestableWalFilter.html#a442d4467027d198feb93c2677856014b">org.rocksdb.WalFilterTest.TestableWalFilter</a>.</p>

</div>
</div>
<a id="a64557817b75165f1a62d808ca5abeeff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64557817b75165f1a62d808ca5abeeff">&#9670;&nbsp;</a></span>name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String org.rocksdb.WalFilter.name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a name that identifies this WAL filter. The name will be printed to LOG file on start up for diagnosis.</p>
<dl class="section return"><dt>Returns</dt><dd>the name </dd></dl>

<p>Implemented in <a class="el" href="classorg_1_1rocksdb_1_1WalFilterTest_1_1TestableWalFilter.html#a23b6b9037b9d13186c1041ff3e619724">org.rocksdb.WalFilterTest.TestableWalFilter</a>.</p>

</div>
</div>
<hr/>The documentation for this interface was generated from the following file:<ul>
<li>src/rocksdb/java/src/main/java/org/rocksdb/WalFilter.java</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
