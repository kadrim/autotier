<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>autotier: src/rocksdb/include/rocksdb/options.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">autotier
   </div>
   <div id="projectbrief">Automatic Tiering Fuse Filesystem</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ab48de68820f4f2b1558159a0a2d81e2.html">src</a></li><li class="navelem"><a class="el" href="dir_2f54fadb1cb00ea24234c3272e3c1393.html">rocksdb</a></li><li class="navelem"><a class="el" href="dir_65ff6ae632de5f1a2d5fdff0edec8f15.html">include</a></li><li class="navelem"><a class="el" href="dir_1650a3f8a06fd2e861354235cca4243e.html">rocksdb</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">options.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright (c) 2011-present, Facebook, Inc.  All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//  This source code is licensed under both the GPLv2 (found in the</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//  COPYING file in the root directory) and Apache 2.0 License</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//  (found in the LICENSE.Apache file in the root directory).</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// Copyright (c) 2011 The LevelDB Authors. All rights reserved.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// found in the LICENSE file. See the AUTHORS file for names of contributors.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#pragma once</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;stddef.h&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;limits&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;unordered_map&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;rocksdb/advanced_options.h&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;rocksdb/comparator.h&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;rocksdb/compression_type.h&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;rocksdb/customizable.h&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;rocksdb/data_structure.h&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;rocksdb/env.h&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;rocksdb/file_checksum.h&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;rocksdb/listener.h&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;rocksdb/sst_partitioner.h&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;rocksdb/types.h&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;rocksdb/universal_compaction.h&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;rocksdb/version.h&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;rocksdb/write_buffer_manager.h&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#ifdef max</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#undef max</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceROCKSDB__NAMESPACE.html">ROCKSDB_NAMESPACE</a> {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">class </span>Cache;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">class </span>CompactionFilter;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">class </span>CompactionFilterFactory;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">class </span>Comparator;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">class </span>ConcurrentTaskLimiter;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">class </span>Env;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">enum</span> InfoLogLevel : <span class="keywordtype">unsigned</span> char;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">class </span>SstFileManager;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">class </span>FilterPolicy;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">class </span><a class="code" href="classLogger.html">Logger</a>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">class </span>MergeOperator;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">class </span>Snapshot;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">class </span>MemTableRepFactory;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">class </span>RateLimiter;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">class </span>Slice;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">class </span>Statistics;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">class </span>InternalKeyComparator;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">class </span>WalFilter;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">class </span>FileSystem;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">struct </span>Options;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">struct </span>DbPath;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">using</span> FileTypeSet = SmallEnumSet&lt;FileType, FileType::kBlobFile&gt;;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">   65</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">ColumnFamilyOptions</a> : <span class="keyword">public</span> <a class="code" href="structROCKSDB__NAMESPACE_1_1AdvancedColumnFamilyOptions.html">AdvancedColumnFamilyOptions</a> {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="comment">// The function recovers options to a previous version. Only 4.6 or later</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment">// versions are supported.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">ColumnFamilyOptions</a>* OldDefaults(<span class="keywordtype">int</span> rocksdb_major_version = 4,</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                                   <span class="keywordtype">int</span> rocksdb_minor_version = 6);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="comment">// Some functions that make it easier to optimize RocksDB</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">// Use this if your DB is very small (like under 1GB) and you don&#39;t want to</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">// spend lots of memory for memtables.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// An optional cache object is passed in to be used as the block cache</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">ColumnFamilyOptions</a>* OptimizeForSmallDb(</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      std::shared_ptr&lt;Cache&gt;* cache = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="comment">// Use this if you don&#39;t need to keep the data sorted, i.e. you&#39;ll never use</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="comment">// an iterator, only Put() and Get() API calls</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="comment">// Not supported in ROCKSDB_LITE</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">ColumnFamilyOptions</a>* OptimizeForPointLookup(uint64_t block_cache_size_mb);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="comment">// Default values for some parameters in ColumnFamilyOptions are not</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="comment">// optimized for heavy workloads and big datasets, which means you might</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="comment">// observe write stalls under some conditions. As a starting point for tuning</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">// RocksDB options, use the following two functions:</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// * OptimizeLevelStyleCompaction -- optimizes level style compaction</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">// * OptimizeUniversalStyleCompaction -- optimizes universal style compaction</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// Universal style compaction is focused on reducing Write Amplification</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// Factor for big data sets, but increases Space Amplification. You can learn</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="comment">// more about the different styles here:</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="comment">// https://github.com/facebook/rocksdb/wiki/Rocksdb-Architecture-Guide</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// Make sure to also call IncreaseParallelism(), which will provide the</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// biggest performance gains.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="comment">// Note: we might use more memory than memtable_memory_budget during high</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// write rate period</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// OptimizeUniversalStyleCompaction is not supported in ROCKSDB_LITE</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">ColumnFamilyOptions</a>* OptimizeLevelStyleCompaction(</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      uint64_t memtable_memory_budget = 512 * 1024 * 1024);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">ColumnFamilyOptions</a>* OptimizeUniversalStyleCompaction(</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      uint64_t memtable_memory_budget = 512 * 1024 * 1024);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// -------------------</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// Parameters that affect behavior</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="comment">// Comparator used to define the order of keys in the table.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// Default: a comparator that uses lexicographic byte-wise ordering</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="comment">// REQUIRES: The client must ensure that the comparator supplied</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// here has the same name and orders keys *exactly* the same as the</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">// comparator provided to previous open calls on the same DB.</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keyword">const</span> <a class="code" href="classROCKSDB__NAMESPACE_1_1Comparator.html">Comparator</a>* <a class="code" href="classtoku_1_1comparator.html">comparator</a> = BytewiseComparator();</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">// REQUIRES: The client must provide a merge operator if Merge operation</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// needs to be accessed. Calling Merge on a DB without a merge operator</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// would result in Status::NotSupported. The client must ensure that the</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">// merge operator supplied here has the same name and *exactly* the same</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">// semantics as the merge operator provided to previous open calls on</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="comment">// the same DB. The only exception is reserved for upgrade, where a DB</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="comment">// previously without a merge operator is introduced to Merge operation</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">// for the first time. It&#39;s necessary to specify a merge operator when</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">// opening the DB in this case.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// Default: nullptr</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  std::shared_ptr&lt;MergeOperator&gt; merge_operator = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// A single CompactionFilter instance to call into during compaction.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// Allows an application to modify/delete a key-value during background</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">// compaction.</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">// If the client requires a new `CompactionFilter` to be used for different</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="comment">// compaction runs and/or requires a `CompactionFilter` for table file</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="comment">// creations outside of compaction, it can specify compaction_filter_factory</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="comment">// instead of this option.  The client should specify only one of the two.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="comment">// compaction_filter takes precedence over compaction_filter_factory if</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="comment">// client specifies both.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="comment">// If multithreaded compaction is being used, the supplied CompactionFilter</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">// instance may be used from different threads concurrently and so should be</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="comment">// thread-safe.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="comment">// Default: nullptr</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keyword">const</span> <a class="code" href="classROCKSDB__NAMESPACE_1_1CompactionFilter.html">CompactionFilter</a>* compaction_filter = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">// This is a factory that provides `CompactionFilter` objects which allow</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">// an application to modify/delete a key-value during table file creation.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="comment">// Unlike the `compaction_filter` option, which is used when compaction</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// creates a table file, this factory allows using a `CompactionFilter` when a</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// table file is created for various reasons. The factory can decide what</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="comment">// `TableFileCreationReason`s use a `CompactionFilter`. For compatibility, by</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="comment">// default the decision is to use a `CompactionFilter` for</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="comment">// `TableFileCreationReason::kCompaction` only.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="comment">// Each thread of work involving creating table files will create a new</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="comment">// `CompactionFilter` when it will be used according to the above</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="comment">// `TableFileCreationReason`-based decision. This allows the application to</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="comment">// know about the different ongoing threads of work and makes it unnecessary</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="comment">// for `CompactionFilter` to provide thread-safety.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="comment">// Default: nullptr</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  std::shared_ptr&lt;CompactionFilterFactory&gt; compaction_filter_factory = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="comment">// -------------------</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="comment">// Parameters that affect performance</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// Amount of data to build up in memory (backed by an unsorted log</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// on disk) before converting to a sorted on-disk file.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// Larger values increase performance, especially during bulk loads.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">// Up to max_write_buffer_number write buffers may be held in memory</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// at the same time,</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// so you may wish to adjust this parameter to control memory usage.</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">// Also, a larger write buffer will result in a longer recovery time</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">// the next time the database is opened.</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">// Note that write_buffer_size is enforced per column family.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">// See db_write_buffer_size for sharing memory across column families.</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="comment">// Default: 64MB</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// Dynamically changeable through SetOptions() API</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordtype">size_t</span> write_buffer_size = 64 &lt;&lt; 20;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">// Compress blocks using the specified compression algorithm.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="comment">// Default: kSnappyCompression, if it&#39;s supported. If snappy is not linked</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="comment">// with the library, the default is kNoCompression.</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="comment">// Typical speeds of kSnappyCompression on an Intel(R) Core(TM)2 2.4GHz:</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">//    ~200-500MB/s compression</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="comment">//    ~400-800MB/s decompression</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">// Note that these speeds are significantly faster than most</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="comment">// persistent storage speeds, and therefore it is typically never</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">// worth switching to kNoCompression.  Even if the input data is</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">// incompressible, the kSnappyCompression implementation will</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">// efficiently detect that and will switch to uncompressed mode.</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="comment">// If you do not set `compression_opts.level`, or set it to</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="comment">// `CompressionOptions::kDefaultCompressionLevel`, we will attempt to pick the</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="comment">// default corresponding to `compression` as follows:</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="comment">// - kZSTD: 3</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="comment">// - kZlibCompression: Z_DEFAULT_COMPRESSION (currently -1)</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="comment">// - kLZ4HCCompression: 0</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="comment">// - For all others, we do not specify a compression level</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="comment">// Dynamically changeable through SetOptions() API</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  CompressionType compression;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="comment">// Compression algorithm that will be used for the bottommost level that</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// contain files. The behavior for num_levels = 1 is not well defined.</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="comment">// Right now, with num_levels = 1,  all compaction outputs will use</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="comment">// bottommost_compression and all flush outputs still use options.compression,</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="comment">// but the behavior is subject to change.</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">// Default: kDisableCompressionOption (Disabled)</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  CompressionType bottommost_compression = kDisableCompressionOption;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="comment">// different options for compression algorithms used by bottommost_compression</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="comment">// if it is enabled. To enable it, please see the definition of</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="comment">// CompressionOptions. Behavior for num_levels = 1 is the same as</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="comment">// options.bottommost_compression.</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1CompressionOptions.html">CompressionOptions</a> bottommost_compression_opts;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="comment">// different options for compression algorithms</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1CompressionOptions.html">CompressionOptions</a> compression_opts;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// Number of files to trigger level-0 compaction. A value &lt;0 means that</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="comment">// level-0 compaction will not be triggered by number of files at all.</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">// Default: 4</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="comment">// Dynamically changeable through SetOptions() API</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordtype">int</span> level0_file_num_compaction_trigger = 4;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">// If non-nullptr, use the specified function to determine the</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// prefixes for keys.  These prefixes will be placed in the filter.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="comment">// Depending on the workload, this can reduce the number of read-IOP</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// cost for scans when a prefix is passed via ReadOptions to</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// db.NewIterator().  For prefix filtering to work properly,</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// &quot;prefix_extractor&quot; and &quot;comparator&quot; must be such that the following</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="comment">// properties hold:</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">// 1) key.starts_with(prefix(key))</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="comment">// 2) Compare(prefix(key), key) &lt;= 0.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">// 3) If Compare(k1, k2) &lt;= 0, then Compare(prefix(k1), prefix(k2)) &lt;= 0</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// 4) prefix(prefix(key)) == prefix(key)</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">// Default: nullptr</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  std::shared_ptr&lt;const SliceTransform&gt; prefix_extractor = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="comment">// Control maximum total data size for a level.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="comment">// max_bytes_for_level_base is the max total for level-1.</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="comment">// Maximum number of bytes for level L can be calculated as</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">// (max_bytes_for_level_base) * (max_bytes_for_level_multiplier ^ (L-1))</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="comment">// For example, if max_bytes_for_level_base is 200MB, and if</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">// max_bytes_for_level_multiplier is 10, total data size for level-1</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// will be 200MB, total file size for level-2 will be 2GB,</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">// and total file size for level-3 will be 20GB.</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// Default: 256MB.</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="comment">// Dynamically changeable through SetOptions() API</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  uint64_t max_bytes_for_level_base = 256 * 1048576;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="comment">// Deprecated.</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  uint64_t snap_refresh_nanos = 0;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">// Disable automatic compactions. Manual compactions can still</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">// be issued on this column family</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">// Dynamically changeable through SetOptions() API</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="keywordtype">bool</span> disable_auto_compactions = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">// This is a factory that provides TableFactory objects.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">// Default: a block-based table factory that provides a default</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// implementation of TableBuilder and TableReader with default</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">// BlockBasedTableOptions.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  std::shared_ptr&lt;TableFactory&gt; table_factory;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="comment">// A list of paths where SST files for this column family</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="comment">// can be put into, with its target size. Similar to db_paths,</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="comment">// newer data is placed into paths specified earlier in the</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="comment">// vector while older data gradually moves to paths specified</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="comment">// later in the vector.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">// Note that, if a path is supplied to multiple column</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// families, it would have files and total size from all</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">// the column families combined. User should provision for the</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="comment">// total size(from all the column families) in such cases.</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="comment">// If left empty, db_paths will be used.</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">// Default: empty</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  std::vector&lt;DbPath&gt; cf_paths;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// Compaction concurrent thread limiter for the column family.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// If non-nullptr, use given concurrent thread limiter to control</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">// the max outstanding compaction tasks. Limiter can be shared with</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="comment">// multiple column families across db instances.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="comment">// Default: nullptr</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  std::shared_ptr&lt;ConcurrentTaskLimiter&gt; compaction_thread_limiter = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="comment">// If non-nullptr, use the specified factory for a function to determine the</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="comment">// partitioning of sst files. This helps compaction to split the files</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="comment">// on interesting boundaries (key prefixes) to make propagation of sst</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="comment">// files less write amplifying (covering the whole key space).</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="comment">// THE FEATURE IS STILL EXPERIMENTAL</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="comment">// Default: nullptr</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  std::shared_ptr&lt;SstPartitionerFactory&gt; sst_partitioner_factory = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">// Create ColumnFamilyOptions with default values for all fields</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">ColumnFamilyOptions</a>();</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// Create ColumnFamilyOptions from Options</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">ColumnFamilyOptions</a>(<span class="keyword">const</span> <a class="code" href="structROCKSDB__NAMESPACE_1_1Options.html">Options</a>&amp; options);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordtype">void</span> Dump(<a class="code" href="classROCKSDB__NAMESPACE_1_1Logger.html">Logger</a>* log) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;};</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="keyword">enum class</span> WALRecoveryMode : char {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="comment">// Original levelDB recovery</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="comment">// We tolerate the last record in any log to be incomplete due to a crash</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="comment">// while writing it. Zeroed bytes from preallocation are also tolerated in the</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="comment">// trailing data of any log.</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="comment">// Use case: Applications for which updates, once applied, must not be rolled</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="comment">// back even after a crash-recovery. In this recovery mode, RocksDB guarantees</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="comment">// this as long as `WritableFile::Append()` writes are durable. In case the</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="comment">// user needs the guarantee in more situations (e.g., when</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="comment">// `WritableFile::Append()` writes to page cache, but the user desires this</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="comment">// guarantee in face of power-loss crash-recovery), RocksDB offers various</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="comment">// mechanisms to additionally invoke `WritableFile::Sync()` in order to</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="comment">// strengthen the guarantee.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="comment">// This differs from `kPointInTimeRecovery` in that, in case a corruption is</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="comment">// detected during recovery, this mode will refuse to open the DB. Whereas,</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="comment">// `kPointInTimeRecovery` will stop recovery just before the corruption since</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="comment">// that is a valid point-in-time to which to recover.</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  kTolerateCorruptedTailRecords = 0x00,</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="comment">// Recover from clean shutdown</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="comment">// We don&#39;t expect to find any corruption in the WAL</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="comment">// Use case : This is ideal for unit tests and rare applications that</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// can require high consistency guarantee</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  kAbsoluteConsistency = 0x01,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">// Recover to point-in-time consistency (default)</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">// We stop the WAL playback on discovering WAL inconsistency</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="comment">// Use case : Ideal for systems that have disk controller cache like</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// hard disk, SSD without super capacitor that store related data</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  kPointInTimeRecovery = 0x02,</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// Recovery after a disaster</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// We ignore any corruption in the WAL and try to salvage as much data as</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// possible</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// Use case : Ideal for last ditch effort to recover data or systems that</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="comment">// operate with low grade unrelated data</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  kSkipAnyCorruptedRecords = 0x03,</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;};</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1DbPath.html">  362</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1DbPath.html">DbPath</a> {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  std::string path;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  uint64_t target_size;  <span class="comment">// Target size of total files under the path, in byte.</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1DbPath.html">DbPath</a>() : target_size(0) {}</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1DbPath.html">DbPath</a>(<span class="keyword">const</span> std::string&amp; p, uint64_t t) : path(p), target_size(t) {}</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;};</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* kHostnameForDbHostId;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="keyword">enum class</span> CompactionServiceJobStatus : char {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  kSuccess,</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  kFailure,</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  kUseLocal,</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;};</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1CompactionServiceJobInfo.html">  378</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1CompactionServiceJobInfo.html">CompactionServiceJobInfo</a> {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  std::string db_name;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  std::string db_id;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  std::string db_session_id;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  uint64_t job_id;  <span class="comment">// job_id is only unique within the current DB and session,</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                    <span class="comment">// restart DB will reset the job_id. `db_id` and</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                    <span class="comment">// `db_session_id` could help you build unique id across</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                    <span class="comment">// different DBs and sessions.</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  Env::Priority priority;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1CompactionServiceJobInfo.html">CompactionServiceJobInfo</a>(std::string db_name_, std::string db_id_,</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                           std::string db_session_id_, uint64_t job_id_,</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                           Env::Priority priority_)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      : db_name(std::move(db_name_)),</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        db_id(std::move(db_id_)),</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        db_session_id(std::move(db_session_id_)),</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        job_id(job_id_),</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        priority(priority_) {}</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;};</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno"><a class="line" href="classROCKSDB__NAMESPACE_1_1CompactionService.html">  399</a></span>&#160;<span class="keyword">class </span><a class="code" href="classROCKSDB__NAMESPACE_1_1CompactionService.html">CompactionService</a> : <span class="keyword">public</span> <a class="code" href="classROCKSDB__NAMESPACE_1_1Customizable.html">Customizable</a> {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* Type() { <span class="keywordflow">return</span> <span class="stringliteral">&quot;CompactionService&quot;</span>; }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="comment">// Returns the name of this compaction service.</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* Name() <span class="keyword">const override</span> = 0;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">// Start the compaction with input information, which can be passed to</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">// `DB::OpenAndCompact()`.</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">// job_id is pre-assigned, it will be reset after DB re-open.</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">// Warning: deprecated, please use the new interface</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="comment">// `StartV2(CompactionServiceJobInfo, ...)` instead.</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keyword">virtual</span> CompactionServiceJobStatus Start(</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="keyword">const</span> std::string&amp; <span class="comment">/*compaction_service_input*/</span>, uint64_t <span class="comment">/*job_id*/</span>) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span> CompactionServiceJobStatus::kUseLocal;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">// Start the remote compaction with `compaction_service_input`, which can be</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// passed to `DB::OpenAndCompact()` on the remote side. `info` provides the</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// information the user might want to know, which includes `job_id`.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keyword">virtual</span> CompactionServiceJobStatus StartV2(</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="keyword">const</span> <a class="code" href="structROCKSDB__NAMESPACE_1_1CompactionServiceJobInfo.html">CompactionServiceJobInfo</a>&amp; info,</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keyword">const</span> std::string&amp; compaction_service_input) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">// Default implementation to call legacy interface, please override and</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// replace the legacy implementation</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">return</span> Start(compaction_service_input, info.job_id);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="comment">// Wait compaction to be finish.</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="comment">// Warning: deprecated, please use the new interface</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">// `WaitForCompleteV2(CompactionServiceJobInfo, ...)` instead.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keyword">virtual</span> CompactionServiceJobStatus WaitForComplete(</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      uint64_t <span class="comment">/*job_id*/</span>, std::string* <span class="comment">/*compaction_service_result*/</span>) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">return</span> CompactionServiceJobStatus::kUseLocal;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// Wait for remote compaction to finish.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keyword">virtual</span> CompactionServiceJobStatus WaitForCompleteV2(</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="keyword">const</span> <a class="code" href="structROCKSDB__NAMESPACE_1_1CompactionServiceJobInfo.html">CompactionServiceJobInfo</a>&amp; info,</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      std::string* compaction_service_result) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment">// Default implementation to call legacy interface, please override and</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">// replace the legacy implementation</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">return</span> WaitForComplete(info.job_id, compaction_service_result);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  ~<a class="code" href="classROCKSDB__NAMESPACE_1_1CompactionService.html">CompactionService</a>() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;};</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1DBOptions.html">  447</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1DBOptions.html">DBOptions</a> {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="comment">// The function recovers options to the option as in version 4.6.</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1DBOptions.html">DBOptions</a>* OldDefaults(<span class="keywordtype">int</span> rocksdb_major_version = 4,</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                         <span class="keywordtype">int</span> rocksdb_minor_version = 6);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="comment">// Some functions that make it easier to optimize RocksDB</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160; </div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="comment">// Use this if your DB is very small (like under 1GB) and you don&#39;t want to</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="comment">// spend lots of memory for memtables.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="comment">// An optional cache object is passed in for the memory of the</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="comment">// memtable to cost to</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1DBOptions.html">DBOptions</a>* OptimizeForSmallDb(std::shared_ptr&lt;Cache&gt;* cache = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="preprocessor">#ifndef ROCKSDB_LITE</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">// By default, RocksDB uses only one background thread for flush and</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="comment">// compaction. Calling this function will set it up such that total of</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">// `total_threads` is used. Good value for `total_threads` is the number of</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// cores. You almost definitely want to call this function if your system is</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">// bottlenecked by RocksDB.</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1DBOptions.html">DBOptions</a>* IncreaseParallelism(<span class="keywordtype">int</span> total_threads = 16);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="preprocessor">#endif  // ROCKSDB_LITE</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="comment">// If true, the database will be created if it is missing.</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordtype">bool</span> create_if_missing = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="comment">// If true, missing column families will be automatically created.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keywordtype">bool</span> create_missing_column_families = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="comment">// If true, an error is raised if the database already exists.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordtype">bool</span> error_if_exists = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="comment">// If true, RocksDB will aggressively check consistency of the data.</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="comment">// Also, if any of the  writes to the database fails (Put, Delete, Merge,</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="comment">// Write), the database will switch to read-only mode and fail all other</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="comment">// Write operations.</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="comment">// In most cases you want this to be set to true.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="comment">// Default: true</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="keywordtype">bool</span> paranoid_checks = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="comment">// If true, during memtable flush, RocksDB will validate total entries</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="comment">// read in flush, and compare with counter inserted into it.</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="comment">// The option is here to turn the feature off in case this new validation</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="comment">// feature has a bug.</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="comment">// Default: true</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keywordtype">bool</span> flush_verify_memtable_count = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="comment">// If true, the log numbers and sizes of the synced WALs are tracked</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="comment">// in MANIFEST, then during DB recovery, if a synced WAL is missing</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="comment">// from disk, or the WAL&#39;s size does not match the recorded size in</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="comment">// MANIFEST, an error will be reported and the recovery will be aborted.</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="comment">// Note that this option does not work with secondary instance.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordtype">bool</span> track_and_verify_wals_in_manifest = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="comment">// Use the specified object to interact with the environment,</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="comment">// e.g. to read/write files, schedule background work, etc. In the near</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="comment">// future, support for doing storage operations such as read/write files</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="comment">// through env will be deprecated in favor of file_system (see below)</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="comment">// Default: Env::Default()</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <a class="code" href="classROCKSDB__NAMESPACE_1_1Env.html">Env</a>* env = Env::Default();</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="comment">// Use to control write rate of flush and compaction. Flush has higher</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment">// priority than compaction. Rate limiting is disabled if nullptr.</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="comment">// If rate limiter is enabled, bytes_per_sync is set to 1MB by default.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="comment">// Default: nullptr</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  std::shared_ptr&lt;RateLimiter&gt; rate_limiter = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// Use to track SST files and control their file deletion rate.</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// Features:</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">//  - Throttle the deletion rate of the SST files.</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="comment">//  - Keep track the total size of all SST files.</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="comment">//  - Set a maximum allowed space limit for SST files that when reached</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="comment">//    the DB wont do any further flushes or compactions and will set the</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">//    background error.</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="comment">//  - Can be shared between multiple dbs.</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="comment">// Limitations:</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="comment">//  - Only track and throttle deletes of SST files in</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="comment">//    first db_path (db_name if db_paths is empty).</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="comment">// Default: nullptr</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  std::shared_ptr&lt;SstFileManager&gt; sst_file_manager = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="comment">// Any internal progress/error information generated by the db will</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="comment">// be written to info_log if it is non-nullptr, or to a file stored</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="comment">// in the same directory as the DB contents if info_log is nullptr.</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="comment">// Default: nullptr</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  std::shared_ptr&lt;Logger&gt; info_log = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="preprocessor">#ifdef NDEBUG</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  InfoLogLevel info_log_level = INFO_LEVEL;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  InfoLogLevel info_log_level = DEBUG_LEVEL;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="comment">// Number of open files that can be used by the DB.  You may need to</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="comment">// increase this if your database has a large working set. Value -1 means</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// files opened are always kept open. You can estimate number of files based</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">// on target_file_size_base and target_file_size_multiplier for level-based</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">// compaction. For universal-style compaction, you can usually set it to -1.</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// Default: -1</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="comment">// Dynamically changeable through SetDBOptions() API.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordtype">int</span> max_open_files = -1;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// If max_open_files is -1, DB will open all files on DB::Open(). You can</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="comment">// use this option to increase the number of threads used to open the files.</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="comment">// Default: 16</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="keywordtype">int</span> max_file_opening_threads = 16;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="comment">// Once write-ahead logs exceed this size, we will start forcing the flush of</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="comment">// column families whose memtables are backed by the oldest live WAL file</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="comment">// (i.e. the ones that are causing all the space amplification). If set to 0</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="comment">// (default), we will dynamically choose the WAL size limit to be</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="comment">// [sum of all write_buffer_size * max_write_buffer_number] * 4</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="comment">// This option takes effect only when there are more than one column family as</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="comment">// otherwise the wal size is dictated by the write_buffer_size.</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="comment">// Default: 0</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="comment">// Dynamically changeable through SetDBOptions() API.</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  uint64_t max_total_wal_size = 0;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="comment">// If non-null, then we should collect metrics about database operations</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  std::shared_ptr&lt;Statistics&gt; statistics = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="comment">// By default, writes to stable storage use fdatasync (on platforms</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="comment">// where this function is available). If this option is true,</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="comment">// fsync is used instead.</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="comment">// fsync and fdatasync are equally safe for our purposes and fdatasync is</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="comment">// faster, so it is rarely necessary to set this option. It is provided</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="comment">// as a workaround for kernel/filesystem bugs, such as one that affected</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="comment">// fdatasync with ext4 in kernel versions prior to 3.7.</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="keywordtype">bool</span> use_fsync = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="comment">// A list of paths where SST files can be put into, with its target size.</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="comment">// Newer data is placed into paths specified earlier in the vector while</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">// older data gradually moves to paths specified later in the vector.</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="comment">// For example, you have a flash device with 10GB allocated for the DB,</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="comment">// as well as a hard drive of 2TB, you should config it to be:</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="comment">//   [{&quot;/flash_path&quot;, 10GB}, {&quot;/hard_drive&quot;, 2TB}]</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// The system will try to guarantee data under each path is close to but</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// not larger than the target size. But current and future file sizes used</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">// by determining where to place a file are based on best-effort estimation,</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">// which means there is a chance that the actual size under the directory</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="comment">// is slightly more than target size under some workloads. User should give</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="comment">// some buffer room for those cases.</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">// If none of the paths has sufficient room to place a file, the file will</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="comment">// be placed to the last path anyway, despite to the target size.</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="comment">// Placing newer data to earlier paths is also best-efforts. User should</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// expect user files to be placed in higher levels in some extreme cases.</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="comment">// If left empty, only one path will be used, which is db_name passed when</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">// opening the DB.</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">// Default: empty</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  std::vector&lt;DbPath&gt; db_paths;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="comment">// This specifies the info LOG dir.</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="comment">// If it is empty, the log files will be in the same dir as data.</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="comment">// If it is non empty, the log files will be in the specified dir,</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// and the db data dir&#39;s absolute path will be used as the log file</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// name&#39;s prefix.</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  std::string db_log_dir = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// This specifies the absolute dir path for write-ahead logs (WAL).</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="comment">// If it is empty, the log files will be in the same dir as data,</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="comment">//   dbname is used as the data dir by default</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="comment">// If it is non empty, the log files will be in kept the specified dir.</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="comment">// When destroying the db,</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="comment">//   all log files in wal_dir and the dir itself is deleted</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  std::string wal_dir = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="comment">// The periodicity when obsolete files get deleted. The default</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="comment">// value is 6 hours. The files that get out of scope by compaction</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="comment">// process will still get automatically delete on every compaction,</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="comment">// regardless of this setting</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="comment">// Default: 6 hours</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="comment">// Dynamically changeable through SetDBOptions() API.</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  uint64_t delete_obsolete_files_period_micros = 6ULL * 60 * 60 * 1000000;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="comment">// Maximum number of concurrent background jobs (compactions and flushes).</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="comment">// Default: 2</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="comment">// Dynamically changeable through SetDBOptions() API.</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordtype">int</span> max_background_jobs = 2;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="comment">// NOT SUPPORTED ANYMORE: RocksDB automatically decides this based on the</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="comment">// value of max_background_jobs. This option is ignored.</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="comment">// Dynamically changeable through SetDBOptions() API.</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordtype">int</span> base_background_compactions = -1;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="comment">// NOT SUPPORTED ANYMORE: RocksDB automatically decides this based on the</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="comment">// value of max_background_jobs. For backwards compatibility we will set</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="comment">// `max_background_jobs = max_background_compactions + max_background_flushes`</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="comment">// in the case where user sets at least one of `max_background_compactions` or</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="comment">// `max_background_flushes` (we replace -1 by 1 in case one option is unset).</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="comment">// Maximum number of concurrent background compaction jobs, submitted to</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="comment">// the default LOW priority thread pool.</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="comment">// If you&#39;re increasing this, also consider increasing number of threads in</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="comment">// LOW priority thread pool. For more information, see</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="comment">// Env::SetBackgroundThreads</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="comment">// Default: -1</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="comment">// Dynamically changeable through SetDBOptions() API.</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordtype">int</span> max_background_compactions = -1;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="comment">// This value represents the maximum number of threads that will</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// concurrently perform a compaction job by breaking it into multiple,</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="comment">// smaller ones that are run simultaneously.</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="comment">// Default: 1 (i.e. no subcompactions)</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="comment">// Dynamically changeable through SetDBOptions() API.</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  uint32_t max_subcompactions = 1;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="comment">// NOT SUPPORTED ANYMORE: RocksDB automatically decides this based on the</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">// value of max_background_jobs. For backwards compatibility we will set</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="comment">// `max_background_jobs = max_background_compactions + max_background_flushes`</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment">// in the case where user sets at least one of `max_background_compactions` or</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="comment">// `max_background_flushes`.</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="comment">// Maximum number of concurrent background memtable flush jobs, submitted by</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="comment">// default to the HIGH priority thread pool. If the HIGH priority thread pool</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="comment">// is configured to have zero threads, flush jobs will share the LOW priority</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="comment">// thread pool with compaction jobs.</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="comment">// It is important to use both thread pools when the same Env is shared by</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="comment">// multiple db instances. Without a separate pool, long running compaction</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="comment">// jobs could potentially block memtable flush jobs of other db instances,</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="comment">// leading to unnecessary Put stalls.</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="comment">// If you&#39;re increasing this, also consider increasing number of threads in</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="comment">// HIGH priority thread pool. For more information, see</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="comment">// Env::SetBackgroundThreads</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="comment">// Default: -1</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="keywordtype">int</span> max_background_flushes = -1;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="comment">// Specify the maximal size of the info log file. If the log file</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="comment">// is larger than `max_log_file_size`, a new info log file will</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="comment">// be created.</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="comment">// If max_log_file_size == 0, all logs will be written to one</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="comment">// log file.</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordtype">size_t</span> max_log_file_size = 0;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="comment">// Time for the info log file to roll (in seconds).</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="comment">// If specified with non-zero value, log file will be rolled</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="comment">// if it has been active longer than `log_file_time_to_roll`.</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="comment">// Default: 0 (disabled)</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="comment">// Not supported in ROCKSDB_LITE mode!</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keywordtype">size_t</span> log_file_time_to_roll = 0;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="comment">// Maximal info log files to be kept.</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="comment">// Default: 1000</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="keywordtype">size_t</span> keep_log_file_num = 1000;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="comment">// Recycle log files.</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="comment">// If non-zero, we will reuse previously written log files for new</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="comment">// logs, overwriting the old data.  The value indicates how many</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="comment">// such files we will keep around at any point in time for later</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="comment">// use.  This is more efficient because the blocks are already</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// allocated and fdatasync does not need to update the inode after</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="comment">// each write.</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="comment">// Default: 0</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="keywordtype">size_t</span> recycle_log_file_num = 0;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="comment">// manifest file is rolled over on reaching this limit.</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="comment">// The older manifest file be deleted.</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="comment">// The default value is 1GB so that the manifest file can grow, but not</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="comment">// reach the limit of storage capacity.</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  uint64_t max_manifest_file_size = 1024 * 1024 * 1024;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="comment">// Number of shards used for table cache.</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="keywordtype">int</span> table_cache_numshardbits = 6;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="comment">// NOT SUPPORTED ANYMORE</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="comment">// int table_cache_remove_scan_count_limit;</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160; </div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="comment">// The following two fields affect how archived logs will be deleted.</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="comment">// 1. If both set to 0, logs will be deleted asap and will not get into</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="comment">//    the archive.</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="comment">// 2. If WAL_ttl_seconds is 0 and WAL_size_limit_MB is not 0,</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="comment">//    WAL files will be checked every 10 min and if total size is greater</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="comment">//    then WAL_size_limit_MB, they will be deleted starting with the</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="comment">//    earliest until size_limit is met. All empty files will be deleted.</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="comment">// 3. If WAL_ttl_seconds is not 0 and WAL_size_limit_MB is 0, then</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="comment">//    WAL files will be checked every WAL_ttl_seconds / 2 and those that</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="comment">//    are older than WAL_ttl_seconds will be deleted.</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="comment">// 4. If both are not 0, WAL files will be checked every 10 min and both</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="comment">//    checks will be performed with ttl being first.</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  uint64_t WAL_ttl_seconds = 0;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  uint64_t WAL_size_limit_MB = 0;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="comment">// Number of bytes to preallocate (via fallocate) the manifest</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="comment">// files.  Default is 4mb, which is reasonable to reduce random IO</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="comment">// as well as prevent overallocation for mounts that preallocate</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="comment">// large amounts of data (such as xfs&#39;s allocsize option).</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keywordtype">size_t</span> manifest_preallocation_size = 4 * 1024 * 1024;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="comment">// Allow the OS to mmap file for reading sst tables. Default: false</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="keywordtype">bool</span> allow_mmap_reads = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="comment">// Allow the OS to mmap file for writing.</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="comment">// DB::SyncWAL() only works if this is set to false.</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="keywordtype">bool</span> allow_mmap_writes = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="comment">// Enable direct I/O mode for read/write</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="comment">// they may or may not improve performance depending on the use case</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="comment">// Files will be opened in &quot;direct I/O&quot; mode</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="comment">// which means that data r/w from the disk will not be cached or</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="comment">// buffered. The hardware buffer of the devices may however still</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="comment">// be used. Memory mapped files are not impacted by these parameters.</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="comment">// Use O_DIRECT for user and compaction reads.</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="comment">// When true, we also force new_table_reader_for_compaction_inputs to true.</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="comment">// Not supported in ROCKSDB_LITE mode!</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="keywordtype">bool</span> use_direct_reads = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="comment">// Use O_DIRECT for writes in background flush and compactions.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="comment">// Not supported in ROCKSDB_LITE mode!</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="keywordtype">bool</span> use_direct_io_for_flush_and_compaction = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="comment">// If false, fallocate() calls are bypassed, which disables file</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="comment">// preallocation. The file space preallocation is used to increase the file</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="comment">// write/append performance. By default, RocksDB preallocates space for WAL,</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="comment">// SST, Manifest files, the extra space is truncated when the file is written.</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="comment">// Warning: if you&#39;re using btrfs, we would recommend setting</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="comment">// `allow_fallocate=false` to disable preallocation. As on btrfs, the extra</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="comment">// allocated space cannot be freed, which could be significant if you have</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="comment">// lots of files. More details about this limitation:</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="comment">// https://github.com/btrfs/btrfs-dev-docs/blob/471c5699336e043114d4bca02adcd57d9dab9c44/data-extent-reference-counts.md</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordtype">bool</span> allow_fallocate = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="comment">// Disable child process inherit open files. Default: true</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="keywordtype">bool</span> is_fd_close_on_exec = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160; </div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <span class="comment">// NOT SUPPORTED ANYMORE -- this options is no longer used</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordtype">bool</span> skip_log_error_on_recovery = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="comment">// if not zero, dump rocksdb.stats to LOG every stats_dump_period_sec</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="comment">// Default: 600 (10 min)</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="comment">// Dynamically changeable through SetDBOptions() API.</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> stats_dump_period_sec = 600;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="comment">// if not zero, dump rocksdb.stats to RocksDB every stats_persist_period_sec</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="comment">// Default: 600</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> stats_persist_period_sec = 600;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="comment">// If true, automatically persist stats to a hidden column family (column</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="comment">// family name: ___rocksdb_stats_history___) every</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="comment">// stats_persist_period_sec seconds; otherwise, write to an in-memory</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="comment">// struct. User can query through `GetStatsHistory` API.</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="comment">// If user attempts to create a column family with the same name on a DB</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="comment">// which have previously set persist_stats_to_disk to true, the column family</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="comment">// creation will fail, but the hidden column family will survive, as well as</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="comment">// the previously persisted statistics.</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="comment">// When peristing stats to disk, the stat name will be limited at 100 bytes.</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="keywordtype">bool</span> persist_stats_to_disk = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="comment">// if not zero, periodically take stats snapshots and store in memory, the</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="comment">// memory size for stats snapshots is capped at stats_history_buffer_size</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="comment">// Default: 1MB</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keywordtype">size_t</span> stats_history_buffer_size = 1024 * 1024;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="comment">// If set true, will hint the underlying file system that the file</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="comment">// access pattern is random, when a sst file is opened.</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="comment">// Default: true</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="keywordtype">bool</span> advise_random_on_open = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="comment">// [experimental]</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="comment">// Used to activate or deactive the Mempurge feature (memtable garbage</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="comment">// collection). (deactivated by default). At every flush, the total useful</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="comment">// payload (total entries minus garbage entries) is estimated as a ratio</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="comment">// [useful payload bytes]/[size of a memtable (in bytes)]. This ratio is then</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="comment">// compared to this `threshold` value:</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="comment">//     - if ratio&lt;threshold: the flush is replaced by a mempurge operation</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="comment">//     - else: a regular flush operation takes place.</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="comment">// Threshold values:</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="comment">//   0.0: mempurge deactivated (default).</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="comment">//   1.0: recommended threshold value.</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="comment">//   &gt;1.0 : aggressive mempurge.</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="comment">//   0 &lt; threshold &lt; 1.0: mempurge triggered only for very low useful payload</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="comment">//   ratios.</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="comment">// [experimental]</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="keywordtype">double</span> experimental_mempurge_threshold = 0.0;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="comment">// Amount of data to build up in memtables across all column</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="comment">// families before writing to disk.</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="comment">// This is distinct from write_buffer_size, which enforces a limit</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="comment">// for a single memtable.</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">// This feature is disabled by default. Specify a non-zero value</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="comment">// to enable it.</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="comment">// Default: 0 (disabled)</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="keywordtype">size_t</span> db_write_buffer_size = 0;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="comment">// The memory usage of memtable will report to this object. The same object</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="comment">// can be passed into multiple DBs and it will track the sum of size of all</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="comment">// the DBs. If the total size of all live memtables of all the DBs exceeds</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="comment">// a limit, a flush will be triggered in the next DB to which the next write</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="comment">// is issued.</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="comment">// If the object is only passed to one DB, the behavior is the same as</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="comment">// db_write_buffer_size. When write_buffer_manager is set, the value set will</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="comment">// override db_write_buffer_size.</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="comment">// This feature is disabled by default. Specify a non-zero value</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="comment">// to enable it.</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="comment">// Default: null</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  std::shared_ptr&lt;WriteBufferManager&gt; write_buffer_manager = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="comment">// Specify the file access pattern once a compaction is started.</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">// It will be applied to all input files of a compaction.</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="comment">// Default: NORMAL</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="keyword">enum</span> AccessHint { NONE, NORMAL, SEQUENTIAL, WILLNEED };</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  AccessHint access_hint_on_compaction_start = NORMAL;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="comment">// If true, always create a new file descriptor and new table reader</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="comment">// for compaction inputs. Turn this parameter on may introduce extra</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="comment">// memory usage in the table reader, if it allocates extra memory</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="comment">// for indexes. This will allow file descriptor prefetch options</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="comment">// to be set for compaction input files and not to impact file</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">// descriptors for the same file used by user queries.</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="comment">// Suggest to enable BlockBasedTableOptions.cache_index_and_filter_blocks</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="comment">// for this mode if using block-based table.</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="comment">// This flag has no affect on the behavior of compaction and plan to delete</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="comment">// in the future.</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="keywordtype">bool</span> new_table_reader_for_compaction_inputs = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160; </div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="comment">// If non-zero, we perform bigger reads when doing compaction. If you&#39;re</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="comment">// running RocksDB on spinning disks, you should set this to at least 2MB.</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">// That way RocksDB&#39;s compaction is doing sequential instead of random reads.</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="comment">// When non-zero, we also force new_table_reader_for_compaction_inputs to</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="comment">// true.</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="comment">// Default: 0</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// Dynamically changeable through SetDBOptions() API.</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keywordtype">size_t</span> compaction_readahead_size = 0;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <span class="comment">// This is a maximum buffer size that is used by WinMmapReadableFile in</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="comment">// unbuffered disk I/O mode. We need to maintain an aligned buffer for</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="comment">// reads. We allow the buffer to grow until the specified value and then</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="comment">// for bigger requests allocate one shot buffers. In unbuffered mode we</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="comment">// always bypass read-ahead buffer at ReadaheadRandomAccessFile</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="comment">// When read-ahead is required we then make use of compaction_readahead_size</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">// value and always try to read ahead. With read-ahead we always</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="comment">// pre-allocate buffer to the size instead of growing it up to a limit.</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="comment">// This option is currently honored only on Windows</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="comment">// Default: 1 Mb</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="comment">// Special value: 0 - means do not maintain per instance buffer. Allocate</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="comment">//                per request buffer and avoid locking.</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="keywordtype">size_t</span> random_access_max_buffer_size = 1024 * 1024;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="comment">// This is the maximum buffer size that is used by WritableFileWriter.</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">// On Windows, we need to maintain an aligned buffer for writes.</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="comment">// We allow the buffer to grow until it&#39;s size hits the limit in buffered</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="comment">// IO and fix the buffer size when using direct IO to ensure alignment of</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="comment">// write requests if the logical sector size is unusual</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="comment">// Default: 1024 * 1024 (1 MB)</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="comment">// Dynamically changeable through SetDBOptions() API.</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <span class="keywordtype">size_t</span> writable_file_max_buffer_size = 1024 * 1024;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <span class="comment">// Use adaptive mutex, which spins in the user space before resorting</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="comment">// to kernel. This could reduce context switch when the mutex is not</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="comment">// heavily contended. However, if the mutex is hot, we could end up</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="comment">// wasting spin time.</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="keywordtype">bool</span> use_adaptive_mutex = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="comment">// Create DBOptions with default values for all fields</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1DBOptions.html">DBOptions</a>();</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="comment">// Create DBOptions from Options</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="structROCKSDB__NAMESPACE_1_1DBOptions.html">DBOptions</a>(<span class="keyword">const</span> <a class="code" href="structROCKSDB__NAMESPACE_1_1Options.html">Options</a>&amp; options);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160; </div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <span class="keywordtype">void</span> Dump(<a class="code" href="classROCKSDB__NAMESPACE_1_1Logger.html">Logger</a>* log) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="comment">// Allows OS to incrementally sync files to disk while they are being</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="comment">// written, asynchronously, in the background. This operation can be used</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <span class="comment">// to smooth out write I/Os over time. Users shouldn&#39;t rely on it for</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="comment">// persistence guarantee.</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="comment">// Issue one request for every bytes_per_sync written. 0 turns it off.</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="comment">// You may consider using rate_limiter to regulate write rate to device.</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="comment">// When rate limiter is enabled, it automatically enables bytes_per_sync</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <span class="comment">// to 1MB.</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="comment">// This option applies to table files</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="comment">// Default: 0, turned off</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="comment">// Note: DOES NOT apply to WAL files. See wal_bytes_per_sync instead</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="comment">// Dynamically changeable through SetDBOptions() API.</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  uint64_t bytes_per_sync = 0;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="comment">// Same as bytes_per_sync, but applies to WAL files</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="comment">// Default: 0, turned off</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="comment">// Dynamically changeable through SetDBOptions() API.</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  uint64_t wal_bytes_per_sync = 0;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="comment">// When true, guarantees WAL files have at most `wal_bytes_per_sync`</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="comment">// bytes submitted for writeback at any given time, and SST files have at most</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="comment">// `bytes_per_sync` bytes pending writeback at any given time. This can be</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="comment">// used to handle cases where processing speed exceeds I/O speed during file</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <span class="comment">// generation, which can lead to a huge sync when the file is finished, even</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="comment">// with `bytes_per_sync` / `wal_bytes_per_sync` properly configured.</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="comment">//  - If `sync_file_range` is supported it achieves this by waiting for any</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <span class="comment">//    prior `sync_file_range`s to finish before proceeding. In this way,</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <span class="comment">//    processing (compression, etc.) can proceed uninhibited in the gap</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="comment">//    between `sync_file_range`s, and we block only when I/O falls behind.</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="comment">//  - Otherwise the `WritableFile::Sync` method is used. Note this mechanism</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="comment">//    always blocks, thus preventing the interleaving of I/O and processing.</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <span class="comment">// Note: Enabling this option does not provide any additional persistence</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="comment">// guarantees, as it may use `sync_file_range`, which does not write out</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="comment">// metadata.</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="keywordtype">bool</span> strict_bytes_per_sync = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160; </div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="comment">// A vector of EventListeners whose callback functions will be called</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="comment">// when specific RocksDB event happens.</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  std::vector&lt;std::shared_ptr&lt;EventListener&gt;&gt; listeners;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="comment">// If true, then the status of the threads involved in this DB will</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="comment">// be tracked and available via GetThreadList() API.</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="keywordtype">bool</span> enable_thread_tracking = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="comment">// The limited write rate to DB if soft_pending_compaction_bytes_limit or</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="comment">// level0_slowdown_writes_trigger is triggered, or we are writing to the</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="comment">// last mem table allowed and we allow more than 3 mem tables. It is</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="comment">// calculated using size of user write requests before compression.</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="comment">// RocksDB may decide to slow down more if the compaction still</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="comment">// gets behind further.</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="comment">// If the value is 0, we will infer a value from `rater_limiter` value</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <span class="comment">// if it is not empty, or 16MB if `rater_limiter` is empty. Note that</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="comment">// if users change the rate in `rate_limiter` after DB is opened,</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <span class="comment">// `delayed_write_rate` won&#39;t be adjusted.</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="comment">// Unit: byte per second.</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="comment">// Default: 0</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="comment">// Dynamically changeable through SetDBOptions() API.</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  uint64_t delayed_write_rate = 0;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="comment">// By default, a single write thread queue is maintained. The thread gets</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="comment">// to the head of the queue becomes write batch group leader and responsible</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="comment">// for writing to WAL and memtable for the batch group.</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="comment">// If enable_pipelined_write is true, separate write thread queue is</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="comment">// maintained for WAL write and memtable write. A write thread first enter WAL</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="comment">// writer queue and then memtable writer queue. Pending thread on the WAL</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="comment">// writer queue thus only have to wait for previous writers to finish their</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="comment">// WAL writing but not the memtable writing. Enabling the feature may improve</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="comment">// write throughput and reduce latency of the prepare phase of two-phase</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <span class="comment">// commit.</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="keywordtype">bool</span> enable_pipelined_write = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <span class="comment">// Setting unordered_write to true trades higher write throughput with</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <span class="comment">// relaxing the immutability guarantee of snapshots. This violates the</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="comment">// repeatability one expects from ::Get from a snapshot, as well as</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="comment">// ::MultiGet and Iterator&#39;s consistent-point-in-time view property.</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="comment">// If the application cannot tolerate the relaxed guarantees, it can implement</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="comment">// its own mechanisms to work around that and yet benefit from the higher</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="comment">// throughput. Using TransactionDB with WRITE_PREPARED write policy and</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="comment">// two_write_queues=true is one way to achieve immutable snapshots despite</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="comment">// unordered_write.</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="comment">// By default, i.e., when it is false, rocksdb does not advance the sequence</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="comment">// number for new snapshots unless all the writes with lower sequence numbers</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="comment">// are already finished. This provides the immutability that we except from</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="comment">// snapshots. Moreover, since Iterator and MultiGet internally depend on</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="comment">// snapshots, the snapshot immutability results into Iterator and MultiGet</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="comment">// offering consistent-point-in-time view. If set to true, although</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="comment">// Read-Your-Own-Write property is still provided, the snapshot immutability</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <span class="comment">// property is relaxed: the writes issued after the snapshot is obtained (with</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="comment">// larger sequence numbers) will be still not visible to the reads from that</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="comment">// snapshot, however, there still might be pending writes (with lower sequence</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="comment">// number) that will change the state visible to the snapshot after they are</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="comment">// landed to the memtable.</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <span class="keywordtype">bool</span> unordered_write = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  <span class="comment">// If true, allow multi-writers to update mem tables in parallel.</span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="comment">// Only some memtable_factory-s support concurrent writes; currently it</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">// is implemented only for SkipListFactory.  Concurrent memtable writes</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="comment">// are not compatible with inplace_update_support or filter_deletes.</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="comment">// It is strongly recommended to set enable_write_thread_adaptive_yield</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="comment">// if you are going to use this feature.</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="comment">// Default: true</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="keywordtype">bool</span> allow_concurrent_memtable_write = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="comment">// If true, threads synchronizing with the write batch group leader will</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="comment">// wait for up to write_thread_max_yield_usec before blocking on a mutex.</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="comment">// This can substantially improve throughput for concurrent workloads,</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="comment">// regardless of whether allow_concurrent_memtable_write is enabled.</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <span class="comment">// Default: true</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="keywordtype">bool</span> enable_write_thread_adaptive_yield = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160; </div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="comment">// The maximum limit of number of bytes that are written in a single batch</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="comment">// of WAL or memtable write. It is followed when the leader write size</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="comment">// is larger than 1/8 of this limit.</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="comment">// Default: 1 MB</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  uint64_t max_write_batch_group_size_bytes = 1 &lt;&lt; 20;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="comment">// The maximum number of microseconds that a write operation will use</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="comment">// a yielding spin loop to coordinate with other write threads before</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="comment">// blocking on a mutex.  (Assuming write_thread_slow_yield_usec is</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="comment">// set properly) increasing this value is likely to increase RocksDB</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <span class="comment">// throughput at the expense of increased CPU usage.</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="comment">// Default: 100</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  uint64_t write_thread_max_yield_usec = 100;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="comment">// The latency in microseconds after which a std::this_thread::yield</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <span class="comment">// call (sched_yield on Linux) is considered to be a signal that</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="comment">// other processes or threads would like to use the current core.</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">// Increasing this makes writer threads more likely to take CPU</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="comment">// by spinning, which will show up as an increase in the number of</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="comment">// involuntary context switches.</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="comment">// Default: 3</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  uint64_t write_thread_slow_yield_usec = 3;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="comment">// If true, then DB::Open() will not update the statistics used to optimize</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="comment">// compaction decision by loading table properties from many files.</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="comment">// Turning off this feature will improve DBOpen time especially in</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="comment">// disk environment.</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="keywordtype">bool</span> skip_stats_update_on_db_open = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160; </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="comment">// If true, then DB::Open() will not fetch and check sizes of all sst files.</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="comment">// This may significantly speed up startup if there are many sst files,</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <span class="comment">// especially when using non-default Env with expensive GetFileSize().</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="comment">// We&#39;ll still check that all required sst files exist.</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="comment">// If paranoid_checks is false, this option is ignored, and sst files are</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="comment">// not checked at all.</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="keywordtype">bool</span> skip_checking_sst_file_sizes_on_db_open = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160; </div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="comment">// Recovery mode to control the consistency while replaying WAL</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="comment">// Default: kPointInTimeRecovery</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  WALRecoveryMode wal_recovery_mode = WALRecoveryMode::kPointInTimeRecovery;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160; </div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="comment">// if set to false then recovery will fail when a prepared</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="comment">// transaction is encountered in the WAL</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="keywordtype">bool</span> allow_2pc = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="comment">// A global cache for table-level rows.</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="comment">// Default: nullptr (disabled)</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="comment">// Not supported in ROCKSDB_LITE mode!</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  std::shared_ptr&lt;Cache&gt; row_cache = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="preprocessor">#ifndef ROCKSDB_LITE</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="comment">// A filter object supplied to be invoked while processing write-ahead-logs</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="comment">// (WALs) during recovery. The filter provides a way to inspect log</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="comment">// records, ignoring a particular record or skipping replay.</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="comment">// The filter is invoked at startup and is invoked from a single-thread</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="comment">// currently.</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <a class="code" href="classROCKSDB__NAMESPACE_1_1WalFilter.html">WalFilter</a>* wal_filter = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="preprocessor">#endif  // ROCKSDB_LITE</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="comment">// If true, then DB::Open / CreateColumnFamily / DropColumnFamily</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="comment">// / SetOptions will fail if options file is not detected or properly</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="comment">// persisted.</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="comment">// DEFAULT: false</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="keywordtype">bool</span> fail_if_options_file_error = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160; </div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <span class="comment">// If true, then print malloc stats together with rocksdb.stats</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="comment">// when printing to LOG.</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="comment">// DEFAULT: false</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keywordtype">bool</span> dump_malloc_stats = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160; </div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="comment">// By default RocksDB replay WAL logs and flush them on DB open, which may</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="comment">// create very small SST files. If this option is enabled, RocksDB will try</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="comment">// to avoid (but not guarantee not to) flush during recovery. Also, existing</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <span class="comment">// WAL logs will be kept, so that if crash happened before flush, we still</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="comment">// have logs to recover from.</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="comment">// DEFAULT: false</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="keywordtype">bool</span> avoid_flush_during_recovery = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="comment">// By default RocksDB will flush all memtables on DB close if there are</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="comment">// unpersisted data (i.e. with WAL disabled) The flush can be skip to speedup</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="comment">// DB close. Unpersisted data WILL BE LOST.</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="comment">// DEFAULT: false</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <span class="comment">// Dynamically changeable through SetDBOptions() API.</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <span class="keywordtype">bool</span> avoid_flush_during_shutdown = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160; </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="comment">// Set this option to true during creation of database if you want</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <span class="comment">// to be able to ingest behind (call IngestExternalFile() skipping keys</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="comment">// that already exist, rather than overwriting matching keys).</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="comment">// Setting this option to true will affect 2 things:</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="comment">// 1) Disable some internal optimizations around SST file compression</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="comment">// 2) Reserve bottom-most level for ingested files only.</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="comment">// 3) Note that num_levels should be &gt;= 3 if this option is turned on.</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="comment">// DEFAULT: false</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="comment">// Immutable.</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="keywordtype">bool</span> allow_ingest_behind = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160; </div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="comment">// Needed to support differential snapshots.</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <span class="comment">// If set to true then DB will only process deletes with sequence number</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="comment">// less than what was set by SetPreserveDeletesSequenceNumber(uint64_t ts).</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="comment">// Clients are responsible to periodically call this method to advance</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <span class="comment">// the cutoff time. If this method is never called and preserve_deletes</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="comment">// is set to true NO deletes will ever be processed.</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="comment">// At the moment this only keeps normal deletes, SingleDeletes will</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <span class="comment">// not be preserved.</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="comment">// DEFAULT: false</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="comment">// Immutable (TODO: make it dynamically changeable)</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="keywordtype">bool</span> preserve_deletes = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160; </div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <span class="comment">// If enabled it uses two queues for writes, one for the ones with</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="comment">// disable_memtable and one for the ones that also write to memtable. This</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="comment">// allows the memtable writes not to lag behind other writes. It can be used</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="comment">// to optimize MySQL 2PC in which only the commits, which are serial, write to</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <span class="comment">// memtable.</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="keywordtype">bool</span> two_write_queues = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160; </div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="comment">// If true WAL is not flushed automatically after each write. Instead it</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="comment">// relies on manual invocation of FlushWAL to write the WAL buffer to its</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="comment">// file.</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordtype">bool</span> manual_wal_flush = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160; </div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <span class="comment">// If true, RocksDB supports flushing multiple column families and committing</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="comment">// their results atomically to MANIFEST. Note that it is not</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <span class="comment">// necessary to set atomic_flush to true if WAL is always enabled since WAL</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <span class="comment">// allows the database to be restored to the last persistent state in WAL.</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <span class="comment">// This option is useful when there are column families with writes NOT</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="comment">// protected by WAL.</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <span class="comment">// For manual flush, application has to specify which column families to</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="comment">// flush atomically in DB::Flush.</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="comment">// For auto-triggered flush, RocksDB atomically flushes ALL column families.</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="comment">// Currently, any WAL-enabled writes after atomic flush may be replayed</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="comment">// independently if the process crashes later and tries to recover.</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="keywordtype">bool</span> atomic_flush = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="comment">// If true, working thread may avoid doing unnecessary and long-latency</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="comment">// operation (such as deleting obsolete files directly or deleting memtable)</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="comment">// and will instead schedule a background job to do it.</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="comment">// Use it if you&#39;re latency-sensitive.</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="comment">// If set to true, takes precedence over</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="comment">// ReadOptions::background_purge_on_iterator_cleanup.</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="keywordtype">bool</span> avoid_unnecessary_blocking_io = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160; </div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="comment">// Historically DB ID has always been stored in Identity File in DB folder.</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="comment">// If this flag is true, the DB ID is written to Manifest file in addition</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="comment">// to the Identity file. By doing this 2 problems are solved</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <span class="comment">// 1. We don&#39;t checksum the Identity file where as Manifest file is.</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="comment">// 2. Since the source of truth for DB is Manifest file DB ID will sit with</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="comment">//    the source of truth. Previously the Identity file could be copied</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="comment">//    independent of Manifest and that can result in wrong DB ID.</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="comment">// We recommend setting this flag to true.</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="keywordtype">bool</span> write_dbid_to_manifest = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160; </div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <span class="comment">// The number of bytes to prefetch when reading the log. This is mostly useful</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="comment">// for reading a remotely located log, as it can save the number of</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="comment">// round-trips. If 0, then the prefetching is disabled.</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="comment">// Default: 0</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="keywordtype">size_t</span> log_readahead_size = 0;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160; </div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="comment">// If user does NOT provide the checksum generator factory, the file checksum</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="comment">// will NOT be used. A new file checksum generator object will be created</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <span class="comment">// when a SST file is created. Therefore, each created FileChecksumGenerator</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <span class="comment">// will only be used from a single thread and so does not need to be</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="comment">// thread-safe.</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <span class="comment">// Default: nullptr</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  std::shared_ptr&lt;FileChecksumGenFactory&gt; file_checksum_gen_factory = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160; </div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <span class="comment">// By default, RocksDB recovery fails if any table file referenced in</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <span class="comment">// MANIFEST are missing after scanning the MANIFEST.</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  <span class="comment">// Best-efforts recovery is another recovery mode that</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  <span class="comment">// tries to restore the database to the most recent point in time without</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="comment">// missing file.</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="comment">// Currently not compatible with atomic flush. Furthermore, WAL files will</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <span class="comment">// not be used for recovery if best_efforts_recovery is true.</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <span class="keywordtype">bool</span> best_efforts_recovery = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160; </div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <span class="comment">// It defines how many times db resume is called by a separate thread when</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <span class="comment">// background retryable IO Error happens. When background retryable IO</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <span class="comment">// Error happens, SetBGError is called to deal with the error. If the error</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <span class="comment">// can be auto-recovered (e.g., retryable IO Error during Flush or WAL write),</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <span class="comment">// then db resume is called in background to recover from the error. If this</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="comment">// value is 0 or negative, db resume will not be called.</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="comment">// Default: INT_MAX</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <span class="keywordtype">int</span> max_bgerror_resume_count = INT_MAX;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160; </div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="comment">// If max_bgerror_resume_count is &gt;= 2, db resume is called multiple times.</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="comment">// This option decides how long to wait to retry the next resume if the</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="comment">// previous resume fails and satisfy redo resume conditions.</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="comment">// Default: 1000000 (microseconds).</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  uint64_t bgerror_resume_retry_interval = 1000000;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160; </div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="comment">// It allows user to opt-in to get error messages containing corrupted</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="comment">// keys/values. Corrupt keys, values will be logged in the</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="comment">// messages/logs/status that will help users with the useful information</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <span class="comment">// regarding affected data. By default value is set false to prevent users</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="comment">// data to be exposed in the logs/messages etc.</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="keywordtype">bool</span> allow_data_in_errors = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160; </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <span class="comment">// A string identifying the machine hosting the DB. This</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <span class="comment">// will be written as a property in every SST file written by the DB (or</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="comment">// by offline writers such as SstFileWriter and RepairDB). It can be useful</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="comment">// for troubleshooting in memory corruption caused by a failing host when</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="comment">// writing a file, by tracing back to the writing host. These corruptions</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="comment">// may not be caught by the checksum since they happen before checksumming.</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <span class="comment">// If left as default, the table writer will substitute it with the actual</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  <span class="comment">// hostname when writing the SST file. If set to an empty string, the</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  <span class="comment">// property will not be written to the SST file.</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <span class="comment">// Default: hostname</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  std::string db_host_id = kHostnameForDbHostId;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160; </div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <span class="comment">// Use this if your DB want to enable checksum handoff for specific file</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="comment">// types writes. Make sure that the File_system you use support the</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="comment">// crc32c checksum verification</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <span class="comment">// Currently supported file tyes: kWALFile, kTableFile, kDescriptorFile.</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <span class="comment">// NOTE: currently RocksDB only generates crc32c based checksum for the</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="comment">// handoff. If the storage layer has different checksum support, user</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="comment">// should enble this set as empty. Otherwise,it may cause unexpected</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="comment">// write failures.</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <a class="code" href="classROCKSDB__NAMESPACE_1_1SmallEnumSet.html">FileTypeSet</a> checksum_handoff_file_types;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160; </div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="comment">// EXPERIMENTAL</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="comment">// CompactionService is a feature allows the user to run compactions on a</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="comment">// different host or process, which offloads the background load from the</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <span class="comment">// primary host.</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="comment">// It&#39;s an experimental feature, the interface will be changed without</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="comment">// backward/forward compatibility support for now. Some known issues are still</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="comment">// under development.</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  std::shared_ptr&lt;CompactionService&gt; compaction_service = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160; </div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="comment">// It indicates, which lowest cache tier we want to</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <span class="comment">// use for a certain DB. Currently we support volatile_tier and</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="comment">// non_volatile_tier. They are layered. By setting it to kVolatileTier, only</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="comment">// the block cache (current implemented volatile_tier) is used. So</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="comment">// cache entries will not spill to secondary cache (current</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="comment">// implemented non_volatile_tier), and block cache lookup misses will not</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <span class="comment">// lookup in the secondary cache. When kNonVolatileBlockTier is used, we use</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <span class="comment">// both block cache and secondary cache.</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="comment">// Default: kNonVolatileBlockTier</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  CacheTier lowest_used_cache_tier = CacheTier::kNonVolatileBlockTier;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;};</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160; </div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">// Options to control the behavior of a database (passed to DB::Open)</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1Options.html"> 1354</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1Options.html">Options</a> : <span class="keyword">public</span> <a class="code" href="structROCKSDB__NAMESPACE_1_1DBOptions.html">DBOptions</a>, <span class="keyword">public</span> <a class="code" href="structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">ColumnFamilyOptions</a> {</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <span class="comment">// Create an Options object with default values for all fields.</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1Options.html">Options</a>() : <a class="code" href="structROCKSDB__NAMESPACE_1_1DBOptions.html">DBOptions</a>(), <a class="code" href="structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">ColumnFamilyOptions</a>() {}</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160; </div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1Options.html">Options</a>(<span class="keyword">const</span> <a class="code" href="structROCKSDB__NAMESPACE_1_1DBOptions.html">DBOptions</a>&amp; db_options,</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;          <span class="keyword">const</span> <a class="code" href="structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">ColumnFamilyOptions</a>&amp; column_family_options)</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      : <a class="code" href="structROCKSDB__NAMESPACE_1_1DBOptions.html">DBOptions</a>(db_options), <a class="code" href="structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">ColumnFamilyOptions</a>(column_family_options) {}</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160; </div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <span class="comment">// The function recovers options to the option as in version 4.6.</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1Options.html">Options</a>* OldDefaults(<span class="keywordtype">int</span> rocksdb_major_version = 4,</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                       <span class="keywordtype">int</span> rocksdb_minor_version = 6);</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160; </div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <span class="keywordtype">void</span> Dump(<a class="code" href="classROCKSDB__NAMESPACE_1_1Logger.html">Logger</a>* log) <span class="keyword">const</span>;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160; </div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <span class="keywordtype">void</span> DumpCFOptions(<a class="code" href="classROCKSDB__NAMESPACE_1_1Logger.html">Logger</a>* log) <span class="keyword">const</span>;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160; </div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="comment">// Some functions that make it easier to optimize RocksDB</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="comment">// Set appropriate parameters for bulk loading.</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="comment">// The reason that this is a function that returns &quot;this&quot; instead of a</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="comment">// constructor is to enable chaining of multiple similar calls in the future.</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160; </div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="comment">// All data will be in level 0 without any automatic compaction.</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <span class="comment">// It&#39;s recommended to manually call CompactRange(NULL, NULL) before reading</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  <span class="comment">// from the database, because otherwise the read can be very slow.</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1Options.html">Options</a>* PrepareForBulkLoad();</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160; </div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="comment">// Use this if your DB is very small (like under 1GB) and you don&#39;t want to</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  <span class="comment">// spend lots of memory for memtables.</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1Options.html">Options</a>* OptimizeForSmallDb();</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;};</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160; </div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment">// An application can issue a read request (via Get/Iterators) and specify</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment">// if that read should process data that ALREADY resides on a specified cache</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="comment">// level. For example, if an application specifies kBlockCacheTier then the</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="comment">// Get call will process data that is already processed in the memtable or</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="comment">// the block cache. It will not page in data from the OS cache or data that</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment">// resides in storage.</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="keyword">enum</span> ReadTier {</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  kReadAllTier = 0x0,     <span class="comment">// data in memtable, block cache, OS cache or storage</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  kBlockCacheTier = 0x1,  <span class="comment">// data in memtable or block cache</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  kPersistedTier = 0x2,   <span class="comment">// persisted data.  When WAL is disabled, this option</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                          <span class="comment">// will skip data in memtable.</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                          <span class="comment">// Note that this ReadTier currently only supports</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                          <span class="comment">// Get and MultiGet and does not support iterators.</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  kMemtableTier = 0x3     <span class="comment">// data in memtable. used for memtable-only iterators.</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;};</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160; </div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="comment">// Options that control read operations</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1ReadOptions.html"> 1405</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1ReadOptions.html">ReadOptions</a> {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <span class="comment">// If &quot;snapshot&quot; is non-nullptr, read as of the supplied snapshot</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  <span class="comment">// (which must belong to the DB that is being read and which must</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <span class="comment">// not have been released).  If &quot;snapshot&quot; is nullptr, use an implicit</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <span class="comment">// snapshot of the state at the beginning of this read operation.</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <span class="comment">// Default: nullptr</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <span class="keyword">const</span> <a class="code" href="classROCKSDB__NAMESPACE_1_1Snapshot.html">Snapshot</a>* snapshot;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <span class="comment">// `iterate_lower_bound` defines the smallest key at which the backward</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="comment">// iterator can return an entry. Once the bound is passed, Valid() will be</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  <span class="comment">// false. `iterate_lower_bound` is inclusive ie the bound value is a valid</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <span class="comment">// entry.</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <span class="comment">// If prefix_extractor is not null, the Seek target and `iterate_lower_bound`</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  <span class="comment">// need to have the same prefix. This is because ordering is not guaranteed</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="comment">// outside of prefix domain.</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="comment">// Default: nullptr</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="keyword">const</span> <a class="code" href="classROCKSDB__NAMESPACE_1_1Slice.html">Slice</a>* iterate_lower_bound;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160; </div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <span class="comment">// &quot;iterate_upper_bound&quot; defines the extent up to which the forward iterator</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="comment">// can returns entries. Once the bound is reached, Valid() will be false.</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <span class="comment">// &quot;iterate_upper_bound&quot; is exclusive ie the bound value is</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="comment">// not a valid entry. If prefix_extractor is not null:</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <span class="comment">// 1. If options.auto_prefix_mode = true, iterate_upper_bound will be used</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="comment">//    to infer whether prefix iterating (e.g. applying prefix bloom filter)</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <span class="comment">//    can be used within RocksDB. This is done by comparing</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <span class="comment">//    iterate_upper_bound with the seek key.</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <span class="comment">// 2. If options.auto_prefix_mode = false, iterate_upper_bound only takes</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="comment">//    effect if it shares the same prefix as the seek key. If</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <span class="comment">//    iterate_upper_bound is outside the prefix of the seek key, then keys</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  <span class="comment">//    returned outside the prefix range will be undefined, just as if</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  <span class="comment">//    iterate_upper_bound = null.</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  <span class="comment">// If iterate_upper_bound is not null, SeekToLast() will position the iterator</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  <span class="comment">// at the first key smaller than iterate_upper_bound.</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <span class="comment">// Default: nullptr</span></div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  <span class="keyword">const</span> <a class="code" href="classROCKSDB__NAMESPACE_1_1Slice.html">Slice</a>* iterate_upper_bound;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160; </div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <span class="comment">// RocksDB does auto-readahead for iterators on noticing more than two reads</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <span class="comment">// for a table file. The readahead starts at 8KB and doubles on every</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="comment">// additional read up to 256KB.</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="comment">// This option can help if most of the range scans are large, and if it is</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <span class="comment">// determined that a larger readahead than that enabled by auto-readahead is</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <span class="comment">// needed.</span></div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <span class="comment">// Using a large readahead size (&gt; 2MB) can typically improve the performance</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="comment">// of forward iteration on spinning disks.</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="comment">// Default: 0</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <span class="keywordtype">size_t</span> readahead_size;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="comment">// A threshold for the number of keys that can be skipped before failing an</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="comment">// iterator seek as incomplete. The default value of 0 should be used to</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="comment">// never fail a request as incomplete, even on skipping too many keys.</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <span class="comment">// Default: 0</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  uint64_t max_skippable_internal_keys;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160; </div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="comment">// Specify if this read request should process data that ALREADY</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <span class="comment">// resides on a particular cache. If the required data is not</span></div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="comment">// found at the specified cache, then Status::Incomplete is returned.</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <span class="comment">// Default: kReadAllTier</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  ReadTier read_tier;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160; </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="comment">// If true, all data read from underlying storage will be</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <span class="comment">// verified against corresponding checksums.</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="comment">// Default: true</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <span class="keywordtype">bool</span> verify_checksums;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160; </div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <span class="comment">// Should the &quot;data block&quot;/&quot;index block&quot; read for this iteration be placed in</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="comment">// block cache?</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <span class="comment">// Callers may wish to set this field to false for bulk scans.</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <span class="comment">// This would help not to the change eviction order of existing items in the</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <span class="comment">// block cache.</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <span class="comment">// Default: true</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <span class="keywordtype">bool</span> fill_cache;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160; </div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <span class="comment">// Specify to create a tailing iterator -- a special iterator that has a</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="comment">// view of the complete database (i.e. it can also be used to read newly</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="comment">// added data) and is optimized for sequential reads. It will return records</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="comment">// that were inserted into the database after the creation of the iterator.</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <span class="comment">// Not supported in ROCKSDB_LITE mode!</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="keywordtype">bool</span> tailing;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160; </div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <span class="comment">// This options is not used anymore. It was to turn on a functionality that</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="comment">// has been removed.</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <span class="keywordtype">bool</span> managed;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160; </div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <span class="comment">// Enable a total order seek regardless of index format (e.g. hash index)</span></div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <span class="comment">// used in the table. Some table format (e.g. plain table) may not support</span></div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <span class="comment">// this option.</span></div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="comment">// If true when calling Get(), we also skip prefix bloom when reading from</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <span class="comment">// block based table. It provides a way to read existing data after</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <span class="comment">// changing implementation of prefix extractor.</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  <span class="keywordtype">bool</span> total_order_seek;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160; </div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  <span class="comment">// When true, by default use total_order_seek = true, and RocksDB can</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  <span class="comment">// selectively enable prefix seek mode if won&#39;t generate a different result</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  <span class="comment">// from total_order_seek, based on seek key, and iterator upper bound.</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <span class="comment">// Not supported in ROCKSDB_LITE mode, in the way that even with value true</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  <span class="comment">// prefix mode is not used.</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  <span class="keywordtype">bool</span> auto_prefix_mode;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160; </div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  <span class="comment">// Enforce that the iterator only iterates over the same prefix as the seek.</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  <span class="comment">// This option is effective only for prefix seeks, i.e. prefix_extractor is</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <span class="comment">// non-null for the column family and total_order_seek is false.  Unlike</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <span class="comment">// iterate_upper_bound, prefix_same_as_start only works within a prefix</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <span class="comment">// but in both directions.</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <span class="keywordtype">bool</span> prefix_same_as_start;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160; </div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <span class="comment">// Keep the blocks loaded by the iterator pinned in memory as long as the</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="comment">// iterator is not deleted, If used when reading from tables created with</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <span class="comment">// BlockBasedTableOptions::use_delta_encoding = false,</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <span class="comment">// Iterator&#39;s property &quot;rocksdb.iterator.is-key-pinned&quot; is guaranteed to</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="comment">// return 1.</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <span class="keywordtype">bool</span> pin_data;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160; </div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  <span class="comment">// If true, when PurgeObsoleteFile is called in CleanupIteratorState, we</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <span class="comment">// schedule a background job in the flush job queue and delete obsolete files</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <span class="comment">// in background.</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <span class="keywordtype">bool</span> background_purge_on_iterator_cleanup;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160; </div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="comment">// If true, range tombstones handling will be skipped in key lookup paths.</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="comment">// For DB instances that don&#39;t use DeleteRange() calls, this setting can</span></div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="comment">// be used to optimize the read performance.</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="comment">// Note that, if this assumption (of no previous DeleteRange() calls) is</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="comment">// broken, stale keys could be served in read paths.</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="keywordtype">bool</span> ignore_range_deletions;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160; </div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <span class="comment">// A callback to determine whether relevant keys for this scan exist in a</span></div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <span class="comment">// given table based on the table&#39;s properties. The callback is passed the</span></div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <span class="comment">// properties of each table during iteration. If the callback returns false,</span></div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  <span class="comment">// the table will not be scanned. This option only affects Iterators and has</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <span class="comment">// no impact on point lookups.</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <span class="comment">// Default: empty (every table will be scanned)</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  std::function&lt;bool(<span class="keyword">const</span> <a class="code" href="structROCKSDB__NAMESPACE_1_1TableProperties.html">TableProperties</a>&amp;)&gt; table_filter;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160; </div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <span class="comment">// Needed to support differential snapshots. Has 2 effects:</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="comment">// 1) Iterator will skip all internal keys with seqnum &lt; iter_start_seqnum</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <span class="comment">// 2) if this param &gt; 0 iterator will return INTERNAL keys instead of</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="comment">//    user keys; e.g. return tombstones as well.</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="comment">// Default: 0 (don&#39;t filter by seqnum, return user keys)</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  SequenceNumber iter_start_seqnum;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160; </div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="comment">// Timestamp of operation. Read should return the latest data visible to the</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <span class="comment">// specified timestamp. All timestamps of the same database must be of the</span></div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <span class="comment">// same length and format. The user is responsible for providing a customized</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="comment">// compare function via Comparator to order &lt;key, timestamp&gt; tuples.</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <span class="comment">// For iterator, iter_start_ts is the lower bound (older) and timestamp</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <span class="comment">// serves as the upper bound. Versions of the same record that fall in</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <span class="comment">// the timestamp range will be returned. If iter_start_ts is nullptr,</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <span class="comment">// only the most recent version visible to timestamp is returned.</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="comment">// The user-specified timestamp feature is still under active development,</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="comment">// and the API is subject to change.</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <span class="comment">// Default: nullptr</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <span class="keyword">const</span> <a class="code" href="classROCKSDB__NAMESPACE_1_1Slice.html">Slice</a>* timestamp;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  <span class="keyword">const</span> <a class="code" href="classROCKSDB__NAMESPACE_1_1Slice.html">Slice</a>* iter_start_ts;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="comment">// Deadline for completing an API call (Get/MultiGet/Seek/Next for now)</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  <span class="comment">// in microseconds.</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  <span class="comment">// It should be set to microseconds since epoch, i.e, gettimeofday or</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <span class="comment">// equivalent plus allowed duration in microseconds. The best way is to use</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="comment">// env-&gt;NowMicros() + some timeout.</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <span class="comment">// This is best efforts. The call may exceed the deadline if there is IO</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="comment">// involved and the file system doesn&#39;t support deadlines, or due to</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="comment">// checking for deadline periodically rather than for every key if</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  <span class="comment">// processing a batch</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  std::chrono::microseconds deadline;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160; </div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <span class="comment">// A timeout in microseconds to be passed to the underlying FileSystem for</span></div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <span class="comment">// reads. As opposed to deadline, this determines the timeout for each</span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <span class="comment">// individual file read request. If a MultiGet/Get/Seek/Next etc call</span></div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <span class="comment">// results in multiple reads, each read can last up to io_timeout us.</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  std::chrono::microseconds io_timeout;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160; </div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <span class="comment">// It limits the maximum cumulative value size of the keys in batch while</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  <span class="comment">// reading through MultiGet. Once the cumulative value size exceeds this</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  <span class="comment">// soft limit then all the remaining keys are returned with status Aborted.</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <span class="comment">// Default: std::numeric_limits&lt;uint64_t&gt;::max()</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  uint64_t value_size_soft_limit;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160; </div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1ReadOptions.html">ReadOptions</a>();</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1ReadOptions.html">ReadOptions</a>(<span class="keywordtype">bool</span> cksum, <span class="keywordtype">bool</span> cache);</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;};</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160; </div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;<span class="comment">// Options that control write operations</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1WriteOptions.html"> 1597</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1WriteOptions.html">WriteOptions</a> {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="comment">// If true, the write will be flushed from the operating system</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <span class="comment">// buffer cache (by calling WritableFile::Sync()) before the write</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  <span class="comment">// is considered complete.  If this flag is true, writes will be</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="comment">// slower.</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <span class="comment">// If this flag is false, and the machine crashes, some recent</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <span class="comment">// writes may be lost.  Note that if it is just the process that</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <span class="comment">// crashes (i.e., the machine does not reboot), no writes will be</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <span class="comment">// lost even if sync==false.</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  <span class="comment">// In other words, a DB write with sync==false has similar</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <span class="comment">// crash semantics as the &quot;write()&quot; system call.  A DB write</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <span class="comment">// with sync==true has similar crash semantics to a &quot;write()&quot;</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  <span class="comment">// system call followed by &quot;fdatasync()&quot;.</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="keywordtype">bool</span> sync;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160; </div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <span class="comment">// If true, writes will not first go to the write ahead log,</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  <span class="comment">// and the write may get lost after a crash. The backup engine</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <span class="comment">// relies on write-ahead logs to back up the memtable, so if</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  <span class="comment">// you disable write-ahead logs, you must create backups with</span></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  <span class="comment">// flush_before_backup=true to avoid losing unflushed memtable data.</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <span class="keywordtype">bool</span> disableWAL;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160; </div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  <span class="comment">// If true and if user is trying to write to column families that don&#39;t exist</span></div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <span class="comment">// (they were dropped),  ignore the write (don&#39;t return an error). If there</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="comment">// are multiple writes in a WriteBatch, other writes will succeed.</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <span class="keywordtype">bool</span> ignore_missing_column_families;</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160; </div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  <span class="comment">// If true and we need to wait or sleep for the write request, fails</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  <span class="comment">// immediately with Status::Incomplete().</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  <span class="keywordtype">bool</span> no_slowdown;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160; </div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  <span class="comment">// If true, this write request is of lower priority if compaction is</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  <span class="comment">// behind. In this case, no_slowdown = true, the request will be canceled</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  <span class="comment">// immediately with Status::Incomplete() returned. Otherwise, it will be</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  <span class="comment">// slowed down. The slowdown value is determined by RocksDB to guarantee</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="comment">// it introduces minimum impacts to high priority writes.</span></div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  <span class="keywordtype">bool</span> low_pri;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160; </div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  <span class="comment">// If true, this writebatch will maintain the last insert positions of each</span></div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <span class="comment">// memtable as hints in concurrent write. It can improve write performance</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <span class="comment">// in concurrent writes if keys in one writebatch are sequential. In</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <span class="comment">// non-concurrent writes (when concurrent_memtable_writes is false) this</span></div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <span class="comment">// option will be ignored.</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <span class="keywordtype">bool</span> memtable_insert_hint_per_batch;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160; </div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="comment">// Timestamp of write operation, e.g. Put. All timestamps of the same</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  <span class="comment">// database must share the same length and format. The user is also</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  <span class="comment">// responsible for providing a customized compare function via Comparator to</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  <span class="comment">// order &lt;key, timestamp&gt; tuples. If the user wants to enable timestamp, then</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  <span class="comment">// all write operations must be associated with timestamp because RocksDB, as</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="comment">// a single-node storage engine currently has no knowledge of global time,</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="comment">// thus has to rely on the application.</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  <span class="comment">// The user-specified timestamp feature is still under active development,</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  <span class="comment">// and the API is subject to change.</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  <span class="keyword">const</span> <a class="code" href="classROCKSDB__NAMESPACE_1_1Slice.html">Slice</a>* timestamp;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160; </div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1WriteOptions.html">WriteOptions</a>()</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;      : sync(<span class="keyword">false</span>),</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        disableWAL(<span class="keyword">false</span>),</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        ignore_missing_column_families(<span class="keyword">false</span>),</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;        no_slowdown(<span class="keyword">false</span>),</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        low_pri(<span class="keyword">false</span>),</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        memtable_insert_hint_per_batch(<span class="keyword">false</span>),</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        timestamp(<span class="keyword">nullptr</span>) {}</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;};</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160; </div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="comment">// Options that control flush operations</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1FlushOptions.html"> 1675</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1FlushOptions.html">FlushOptions</a> {</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <span class="comment">// If true, the flush will wait until the flush is done.</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="comment">// Default: true</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <span class="keywordtype">bool</span> wait;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  <span class="comment">// If true, the flush would proceed immediately even it means writes will</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  <span class="comment">// stall for the duration of the flush; if false the operation will wait</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  <span class="comment">// until it&#39;s possible to do flush w/o causing stall or until required flush</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <span class="comment">// is performed by someone else (foreground call or background thread).</span></div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  <span class="comment">// Default: false</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  <span class="keywordtype">bool</span> allow_write_stall;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1FlushOptions.html">FlushOptions</a>() : wait(<span class="keyword">true</span>), allow_write_stall(<span class="keyword">false</span>) {}</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;};</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160; </div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;<span class="comment">// Create a Logger from provided DBOptions</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;<span class="keyword">extern</span> <a class="code" href="classROCKSDB__NAMESPACE_1_1Status.html">Status</a> CreateLoggerFromOptions(<span class="keyword">const</span> std::string&amp; dbname,</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;                                      <span class="keyword">const</span> <a class="code" href="structROCKSDB__NAMESPACE_1_1DBOptions.html">DBOptions</a>&amp; options,</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;                                      std::shared_ptr&lt;Logger&gt;* logger);</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160; </div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;<span class="comment">// CompactionOptions are used in CompactFiles() call.</span></div>
<div class="line"><a name="l01694"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1CompactionOptions.html"> 1694</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1CompactionOptions.html">CompactionOptions</a> {</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="comment">// Compaction output compression type</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="comment">// Default: snappy</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="comment">// If set to `kDisableCompressionOption`, RocksDB will choose compression type</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  <span class="comment">// according to the `ColumnFamilyOptions`, taking into account the output</span></div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <span class="comment">// level if `compression_per_level` is specified.</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  CompressionType compression;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <span class="comment">// Compaction will create files of size `output_file_size_limit`.</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <span class="comment">// Default: MAX, which means that compaction will create a single file</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  uint64_t output_file_size_limit;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <span class="comment">// If &gt; 0, it will replace the option in the DBOptions for this compaction.</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  uint32_t max_subcompactions;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160; </div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  <a class="code" href="structROCKSDB__NAMESPACE_1_1CompactionOptions.html">CompactionOptions</a>()</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      : compression(kSnappyCompression),</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        output_file_size_limit(std::numeric_limits&lt;uint64_t&gt;::max()),</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        max_subcompactions(0) {}</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;};</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160; </div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;<span class="comment">// For level based compaction, we can configure if we want to skip/force</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;<span class="comment">// bottommost level compaction.</span></div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="keyword">enum class</span> BottommostLevelCompaction {</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  <span class="comment">// Skip bottommost level compaction</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  kSkip,</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <span class="comment">// Only compact bottommost level if there is a compaction filter</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  <span class="comment">// This is the default option</span></div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  kIfHaveCompactionFilter,</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="comment">// Always compact bottommost level</span></div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  kForce,</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="comment">// Always compact bottommost level but in bottommost level avoid</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="comment">// double-compacting files created in the same compaction</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  kForceOptimized,</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;};</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160; </div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;<span class="comment">// CompactRangeOptions is used by CompactRange() call.</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1CompactRangeOptions.html"> 1729</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1CompactRangeOptions.html">CompactRangeOptions</a> {</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <span class="comment">// If true, no other compaction will run at the same time as this</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <span class="comment">// manual compaction</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <span class="keywordtype">bool</span> exclusive_manual_compaction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <span class="comment">// If true, compacted files will be moved to the minimum level capable</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <span class="comment">// of holding the data or given level (specified non-negative target_level).</span></div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <span class="keywordtype">bool</span> change_level = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  <span class="comment">// If change_level is true and target_level have non-negative value, compacted</span></div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="comment">// files will be moved to target_level.</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="keywordtype">int</span> target_level = -1;</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <span class="comment">// Compaction outputs will be placed in options.db_paths[target_path_id].</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  <span class="comment">// Behavior is undefined if target_path_id is out of range.</span></div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  uint32_t target_path_id = 0;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;  <span class="comment">// By default level based compaction will only compact the bottommost level</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  <span class="comment">// if there is a compaction filter</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  BottommostLevelCompaction bottommost_level_compaction =</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      BottommostLevelCompaction::kIfHaveCompactionFilter;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <span class="comment">// If true, will execute immediately even if doing so would cause the DB to</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <span class="comment">// enter write stall mode. Otherwise, it&#39;ll sleep until load is low enough.</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <span class="keywordtype">bool</span> allow_write_stall = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  <span class="comment">// If &gt; 0, it will replace the option in the DBOptions for this compaction.</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  uint32_t max_subcompactions = 0;</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <span class="comment">// Set user-defined timestamp low bound, the data with older timestamp than</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="comment">// low bound maybe GCed by compaction. Default: nullptr</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  <a class="code" href="classROCKSDB__NAMESPACE_1_1Slice.html">Slice</a>* full_history_ts_low = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160; </div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  <span class="comment">// Allows cancellation of an in-progress manual compaction.</span></div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <span class="comment">// Cancellation can be delayed waiting on automatic compactions when used</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="comment">// together with `exclusive_manual_compaction == true`.</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  std::atomic&lt;bool&gt;* canceled = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;};</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160; </div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;<span class="comment">// IngestExternalFileOptions is used by IngestExternalFile()</span></div>
<div class="line"><a name="l01763"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1IngestExternalFileOptions.html"> 1763</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1IngestExternalFileOptions.html">IngestExternalFileOptions</a> {</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  <span class="comment">// Can be set to true to move the files instead of copying them.</span></div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="keywordtype">bool</span> move_files = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <span class="comment">// If set to true, ingestion falls back to copy when move fails.</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <span class="keywordtype">bool</span> failed_move_fall_back_to_copy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  <span class="comment">// If set to false, an ingested file keys could appear in existing snapshots</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <span class="comment">// that where created before the file was ingested.</span></div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <span class="keywordtype">bool</span> snapshot_consistency = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <span class="comment">// If set to false, IngestExternalFile() will fail if the file key range</span></div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  <span class="comment">// overlaps with existing keys or tombstones in the DB.</span></div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="keywordtype">bool</span> allow_global_seqno = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  <span class="comment">// If set to false and the file key range overlaps with the memtable key range</span></div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  <span class="comment">// (memtable flush required), IngestExternalFile will fail.</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  <span class="keywordtype">bool</span> allow_blocking_flush = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <span class="comment">// Set to true if you would like duplicate keys in the file being ingested</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  <span class="comment">// to be skipped rather than overwriting existing data under that key.</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="comment">// Use case: back-fill of some historical data in the database without</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <span class="comment">// over-writing existing newer version of data.</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  <span class="comment">// This option could only be used if the DB has been running</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <span class="comment">// with allow_ingest_behind=true since the dawn of time.</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="comment">// All files will be ingested at the bottommost level with seqno=0.</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;  <span class="keywordtype">bool</span> ingest_behind = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <span class="comment">// Set to true if you would like to write global_seqno to a given offset in</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;  <span class="comment">// the external SST file for backward compatibility. Older versions of</span></div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <span class="comment">// RocksDB writes a global_seqno to a given offset within ingested SST files,</span></div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <span class="comment">// and new versions of RocksDB do not. If you ingest an external SST using</span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  <span class="comment">// new version of RocksDB and would like to be able to downgrade to an</span></div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  <span class="comment">// older version of RocksDB, you should set &#39;write_global_seqno&#39; to true. If</span></div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  <span class="comment">// your service is just starting to use the new RocksDB, we recommend that</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  <span class="comment">// you set this option to false, which brings two benefits:</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  <span class="comment">// 1. No extra random write for global_seqno during ingestion.</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  <span class="comment">// 2. Without writing external SST file, it&#39;s possible to do checksum.</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  <span class="comment">// We have a plan to set this option to false by default in the future.</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  <span class="keywordtype">bool</span> write_global_seqno = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <span class="comment">// Set to true if you would like to verify the checksums of each block of the</span></div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <span class="comment">// external SST file before ingestion.</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="comment">// Warning: setting this to true causes slowdown in file ingestion because</span></div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  <span class="comment">// the external SST file has to be read.</span></div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  <span class="keywordtype">bool</span> verify_checksums_before_ingest = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  <span class="comment">// When verify_checksums_before_ingest = true, RocksDB uses default</span></div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  <span class="comment">// readahead setting to scan the file while verifying checksums before</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  <span class="comment">// ingestion.</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  <span class="comment">// Users can override the default value using this option.</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;  <span class="comment">// Using a large readahead size (&gt; 2MB) can typically improve the performance</span></div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="comment">// of forward iteration on spinning disks.</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <span class="keywordtype">size_t</span> verify_checksums_readahead_size = 0;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  <span class="comment">// Set to TRUE if user wants to verify the sst file checksum of ingested</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <span class="comment">// files. The DB checksum function will generate the checksum of each</span></div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <span class="comment">// ingested file (if file_checksum_gen_factory is set) and compare the</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;  <span class="comment">// checksum function name and checksum with the ingested checksum information.</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  <span class="comment">// If this option is set to True: 1) if DB does not enable checksum</span></div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <span class="comment">// (file_checksum_gen_factory == nullptr), the ingested checksum information</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <span class="comment">// will be ignored; 2) If DB enable the checksum function, we calculate the</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  <span class="comment">// sst file checksum after the file is moved or copied and compare the</span></div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;  <span class="comment">// checksum and checksum name. If checksum or checksum function name does</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  <span class="comment">// not match, ingestion will be failed. If the verification is successful,</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  <span class="comment">// checksum and checksum function name will be stored in Manifest.</span></div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  <span class="comment">// If this option is set to FALSE, 1) if DB does not enable checksum,</span></div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <span class="comment">// the ingested checksum information will be ignored; 2) if DB enable the</span></div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;  <span class="comment">// checksum, we only verify the ingested checksum function name and we</span></div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  <span class="comment">// trust the ingested checksum. If the checksum function name matches, we</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  <span class="comment">// store the checksum in Manifest. DB does not calculate the checksum during</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <span class="comment">// ingestion. However, if no checksum information is provided with the</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  <span class="comment">// ingested files, DB will generate the checksum and store in the Manifest.</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  <span class="keywordtype">bool</span> verify_file_checksum = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;};</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160; </div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;<span class="keyword">enum</span> TraceFilterType : uint64_t {</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="comment">// Trace all the operations</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  kTraceFilterNone = 0x0,</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  <span class="comment">// Do not trace the get operations</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  kTraceFilterGet = 0x1 &lt;&lt; 0,</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <span class="comment">// Do not trace the write operations</span></div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;  kTraceFilterWrite = 0x1 &lt;&lt; 1</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;};</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160; </div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="comment">// TraceOptions is used for StartTrace</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1TraceOptions.html"> 1841</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1TraceOptions.html">TraceOptions</a> {</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  <span class="comment">// To avoid the trace file size grows large than the storage space,</span></div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  <span class="comment">// user can set the max trace file size in Bytes. Default is 64GB</span></div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;  uint64_t max_trace_file_size = uint64_t{64} * 1024 * 1024 * 1024;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  <span class="comment">// Specify trace sampling option, i.e. capture one per how many requests.</span></div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  <span class="comment">// Default to 1 (capture every request).</span></div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  uint64_t sampling_frequency = 1;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="comment">// Note: The filtering happens before sampling.</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  uint64_t filter = kTraceFilterNone;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;};</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160; </div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="comment">// ImportColumnFamilyOptions is used by ImportColumnFamily()</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1ImportColumnFamilyOptions.html"> 1853</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1ImportColumnFamilyOptions.html">ImportColumnFamilyOptions</a> {</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <span class="comment">// Can be set to true to move the files instead of copying them.</span></div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <span class="keywordtype">bool</span> move_files = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;};</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160; </div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;<span class="comment">// Options used with DB::GetApproximateSizes()</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1SizeApproximationOptions.html"> 1859</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1SizeApproximationOptions.html">SizeApproximationOptions</a> {</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <span class="comment">// Defines whether the returned size should include the recently written</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <span class="comment">// data in the mem-tables. If set to false, include_files must be true.</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  <span class="keywordtype">bool</span> include_memtabtles = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  <span class="comment">// Defines whether the returned size should include data serialized to disk.</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <span class="comment">// If set to false, include_memtabtles must be true.</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <span class="keywordtype">bool</span> include_files = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;  <span class="comment">// When approximating the files total size that is used to store a keys range</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  <span class="comment">// using DB::GetApproximateSizes, allow approximation with an error margin of</span></div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  <span class="comment">// up to total_files_size * files_size_error_margin. This allows to take some</span></div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  <span class="comment">// shortcuts in files size approximation, resulting in better performance,</span></div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  <span class="comment">// while guaranteeing the resulting error is within a reasonable margin.</span></div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  <span class="comment">// E.g., if the value is 0.1, then the error margin of the returned files size</span></div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;  <span class="comment">// approximation will be within 10%.</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  <span class="comment">// If the value is non-positive - a more precise yet more CPU intensive</span></div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <span class="comment">// estimation is performed.</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  <span class="keywordtype">double</span> files_size_error_margin = -1.0;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;};</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160; </div>
<div class="line"><a name="l01878"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1CompactionServiceOptionsOverride.html"> 1878</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1CompactionServiceOptionsOverride.html">CompactionServiceOptionsOverride</a> {</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  <span class="comment">// Currently pointer configurations are not passed to compaction service</span></div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <span class="comment">// compaction so the user needs to set it. It will be removed once pointer</span></div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  <span class="comment">// configuration passing is supported.</span></div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  <a class="code" href="classROCKSDB__NAMESPACE_1_1Env.html">Env</a>* env = Env::Default();</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  std::shared_ptr&lt;FileChecksumGenFactory&gt; file_checksum_gen_factory = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160; </div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  <span class="keyword">const</span> <a class="code" href="classROCKSDB__NAMESPACE_1_1Comparator.html">Comparator</a>* <a class="code" href="classtoku_1_1comparator.html">comparator</a> = BytewiseComparator();</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  std::shared_ptr&lt;MergeOperator&gt; merge_operator = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  <span class="keyword">const</span> <a class="code" href="classROCKSDB__NAMESPACE_1_1CompactionFilter.html">CompactionFilter</a>* compaction_filter = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  std::shared_ptr&lt;CompactionFilterFactory&gt; compaction_filter_factory = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  std::shared_ptr&lt;const SliceTransform&gt; prefix_extractor = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  std::shared_ptr&lt;TableFactory&gt; table_factory;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  std::shared_ptr&lt;SstPartitionerFactory&gt; sst_partitioner_factory = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160; </div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  <span class="comment">// statistics is used to collect DB operation metrics, the metrics won&#39;t be</span></div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;  <span class="comment">// returned to CompactionService primary host, to collect that, the user needs</span></div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;  <span class="comment">// to set it here.</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;  std::shared_ptr&lt;Statistics&gt; statistics = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;};</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160; </div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;<span class="preprocessor">#ifndef ROCKSDB_LITE</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"><a class="line" href="structROCKSDB__NAMESPACE_1_1LiveFilesStorageInfoOptions.html"> 1900</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structROCKSDB__NAMESPACE_1_1LiveFilesStorageInfoOptions.html">LiveFilesStorageInfoOptions</a> {</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <span class="comment">// Whether to populate FileStorageInfo::file_checksum* or leave blank</span></div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <span class="keywordtype">bool</span> include_checksum_info = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;  <span class="comment">// Flushes memtables if total size in bytes of live WAL files is &gt;= this</span></div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="comment">// number. Default: always force a flush without checking sizes.</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  uint64_t wal_size_for_flush = 0;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;};</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;<span class="preprocessor">#endif  // !ROCKSDB_LITE</span></div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160; </div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;}  <span class="comment">// namespace ROCKSDB_NAMESPACE</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1SizeApproximationOptions_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1SizeApproximationOptions.html">ROCKSDB_NAMESPACE::SizeApproximationOptions</a></div><div class="ttdef"><b>Definition:</b> options.h:1859</div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html"><div class="ttname"><a href="namespaceROCKSDB__NAMESPACE.html">ROCKSDB_NAMESPACE</a></div><div class="ttdef"><b>Definition:</b> cache.cc:18</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1DBOptions_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1DBOptions.html">ROCKSDB_NAMESPACE::DBOptions</a></div><div class="ttdef"><b>Definition:</b> options.h:447</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1CompactionServiceOptionsOverride_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1CompactionServiceOptionsOverride.html">ROCKSDB_NAMESPACE::CompactionServiceOptionsOverride</a></div><div class="ttdef"><b>Definition:</b> options.h:1878</div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Logger_html"><div class="ttname"><a href="classROCKSDB__NAMESPACE_1_1Logger.html">ROCKSDB_NAMESPACE::Logger</a></div><div class="ttdef"><b>Definition:</b> env.h:1153</div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Env_html"><div class="ttname"><a href="classROCKSDB__NAMESPACE_1_1Env.html">ROCKSDB_NAMESPACE::Env</a></div><div class="ttdef"><b>Definition:</b> env.h:148</div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Comparator_html"><div class="ttname"><a href="classROCKSDB__NAMESPACE_1_1Comparator.html">ROCKSDB_NAMESPACE::Comparator</a></div><div class="ttdef"><b>Definition:</b> comparator.h:24</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1CompactRangeOptions_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1CompactRangeOptions.html">ROCKSDB_NAMESPACE::CompactRangeOptions</a></div><div class="ttdef"><b>Definition:</b> options.h:1729</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1IngestExternalFileOptions_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1IngestExternalFileOptions.html">ROCKSDB_NAMESPACE::IngestExternalFileOptions</a></div><div class="ttdef"><b>Definition:</b> options.h:1763</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1DbPath_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1DbPath.html">ROCKSDB_NAMESPACE::DbPath</a></div><div class="ttdef"><b>Definition:</b> options.h:362</div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Snapshot_html"><div class="ttname"><a href="classROCKSDB__NAMESPACE_1_1Snapshot.html">ROCKSDB_NAMESPACE::Snapshot</a></div><div class="ttdef"><b>Definition:</b> snapshot.h:20</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1WriteOptions_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1WriteOptions.html">ROCKSDB_NAMESPACE::WriteOptions</a></div><div class="ttdef"><b>Definition:</b> options.h:1597</div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1CompactionFilter_html"><div class="ttname"><a href="classROCKSDB__NAMESPACE_1_1CompactionFilter.html">ROCKSDB_NAMESPACE::CompactionFilter</a></div><div class="ttdef"><b>Definition:</b> compaction_filter.h:28</div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1WalFilter_html"><div class="ttname"><a href="classROCKSDB__NAMESPACE_1_1WalFilter.html">ROCKSDB_NAMESPACE::WalFilter</a></div><div class="ttdef"><b>Definition:</b> wal_filter.h:22</div></div>
<div class="ttc" id="aclasstoku_1_1comparator_html"><div class="ttname"><a href="classtoku_1_1comparator.html">toku::comparator</a></div><div class="ttdef"><b>Definition:</b> comparator.h:75</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1ImportColumnFamilyOptions_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1ImportColumnFamilyOptions.html">ROCKSDB_NAMESPACE::ImportColumnFamilyOptions</a></div><div class="ttdef"><b>Definition:</b> options.h:1853</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1CompactionServiceJobInfo_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1CompactionServiceJobInfo.html">ROCKSDB_NAMESPACE::CompactionServiceJobInfo</a></div><div class="ttdef"><b>Definition:</b> options.h:378</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1TableProperties_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1TableProperties.html">ROCKSDB_NAMESPACE::TableProperties</a></div><div class="ttdef"><b>Definition:</b> table_properties.h:168</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1LiveFilesStorageInfoOptions_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1LiveFilesStorageInfoOptions.html">ROCKSDB_NAMESPACE::LiveFilesStorageInfoOptions</a></div><div class="ttdef"><b>Definition:</b> options.h:1900</div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Status_html"><div class="ttname"><a href="classROCKSDB__NAMESPACE_1_1Status.html">ROCKSDB_NAMESPACE::Status</a></div><div class="ttdef"><b>Definition:</b> status.h:34</div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Customizable_html"><div class="ttname"><a href="classROCKSDB__NAMESPACE_1_1Customizable.html">ROCKSDB_NAMESPACE::Customizable</a></div><div class="ttdef"><b>Definition:</b> customizable.h:56</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1CompressionOptions_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1CompressionOptions.html">ROCKSDB_NAMESPACE::CompressionOptions</a></div><div class="ttdef"><b>Definition:</b> advanced_options.h:84</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1ReadOptions_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1ReadOptions.html">ROCKSDB_NAMESPACE::ReadOptions</a></div><div class="ttdef"><b>Definition:</b> options.h:1405</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1FlushOptions_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1FlushOptions.html">ROCKSDB_NAMESPACE::FlushOptions</a></div><div class="ttdef"><b>Definition:</b> options.h:1675</div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Slice_html"><div class="ttname"><a href="classROCKSDB__NAMESPACE_1_1Slice.html">ROCKSDB_NAMESPACE::Slice</a></div><div class="ttdef"><b>Definition:</b> slice.h:35</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1TraceOptions_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1TraceOptions.html">ROCKSDB_NAMESPACE::TraceOptions</a></div><div class="ttdef"><b>Definition:</b> options.h:1841</div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1CompactionService_html"><div class="ttname"><a href="classROCKSDB__NAMESPACE_1_1CompactionService.html">ROCKSDB_NAMESPACE::CompactionService</a></div><div class="ttdef"><b>Definition:</b> options.h:399</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1CompactionOptions_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1CompactionOptions.html">ROCKSDB_NAMESPACE::CompactionOptions</a></div><div class="ttdef"><b>Definition:</b> options.h:1694</div></div>
<div class="ttc" id="aclassLogger_html"><div class="ttname"><a href="classLogger.html">Logger</a></div><div class="ttdoc">Class to print logs to either stdout/stderr or the syslog.</div><div class="ttdef"><b>Definition:</b> alert.hpp:28</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1ColumnFamilyOptions_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">ROCKSDB_NAMESPACE::ColumnFamilyOptions</a></div><div class="ttdef"><b>Definition:</b> options.h:65</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1Options_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1Options.html">ROCKSDB_NAMESPACE::Options</a></div><div class="ttdef"><b>Definition:</b> options.h:1354</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1AdvancedColumnFamilyOptions_html"><div class="ttname"><a href="structROCKSDB__NAMESPACE_1_1AdvancedColumnFamilyOptions.html">ROCKSDB_NAMESPACE::AdvancedColumnFamilyOptions</a></div><div class="ttdef"><b>Definition:</b> advanced_options.h:219</div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1SmallEnumSet_html"><div class="ttname"><a href="classROCKSDB__NAMESPACE_1_1SmallEnumSet.html">ROCKSDB_NAMESPACE::SmallEnumSet&lt; FileType, FileType::kBlobFile &gt;</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
